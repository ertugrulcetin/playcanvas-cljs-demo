{
"version":3,
"file":"goog.ui.popupbase.js",
"lineCount":298,
"mappings":"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",
"sources":["goog/ui/popupbase.js"],
"sourcesContent":["/**\n * @license\n * Copyright The Closure Library Authors.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Definition of the PopupBase class.\n */\n\ngoog.provide('goog.ui.PopupBase');\ngoog.provide('goog.ui.PopupBase.EventType');\ngoog.provide('goog.ui.PopupBase.Type');\n\ngoog.require('goog.Timer');\ngoog.require('goog.array');\ngoog.require('goog.dispose');\ngoog.require('goog.dom');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.events');\ngoog.require('goog.events.EventHandler');\ngoog.require('goog.events.EventTarget');\ngoog.require('goog.events.EventType');\ngoog.require('goog.events.KeyCodes');\ngoog.require('goog.fx.Transition');\ngoog.require('goog.style');\ngoog.require('goog.userAgent');\ngoog.requireType('goog.events.BrowserEvent');\n\n\n\n/**\n * The PopupBase class provides functionality for showing and hiding a generic\n * container element. It also provides the option for hiding the popup element\n * if the user clicks outside the popup or the popup loses focus.\n *\n * @constructor\n * @extends {goog.events.EventTarget}\n * @param {Element=} opt_element A DOM element for the popup.\n * @param {goog.ui.PopupBase.Type=} opt_type Type of popup.\n */\ngoog.ui.PopupBase = function(opt_element, opt_type) {\n  'use strict';\n  goog.events.EventTarget.call(this);\n\n  /**\n   * An event handler to manage the events easily\n   * @type {goog.events.EventHandler<!goog.ui.PopupBase>}\n   * @private\n   */\n  this.handler_ = new goog.events.EventHandler(this);\n\n  this.setElement(opt_element || null);\n  if (opt_type) {\n    this.setType(opt_type);\n  }\n};\ngoog.inherits(goog.ui.PopupBase, goog.events.EventTarget);\n\n\n/**\n * Constants for type of Popup\n * @enum {string}\n */\ngoog.ui.PopupBase.Type = {\n  TOGGLE_DISPLAY: 'toggle_display',\n  MOVE_OFFSCREEN: 'move_offscreen'\n};\n\n\n/**\n * The popup dom element that this Popup wraps.\n * @type {?Element}\n * @private\n */\ngoog.ui.PopupBase.prototype.element_ = null;\n\n\n/**\n * Whether the Popup dismisses itself it the user clicks outside of it or the\n * popup loses focus\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.autoHide_ = true;\n\n\n/**\n * Mouse events without auto hide partner elements will not dismiss the popup.\n * @type {?Array<?Element>}\n * @private\n */\ngoog.ui.PopupBase.prototype.autoHidePartners_ = null;\n\n\n/**\n * Clicks outside the popup but inside this element will cause the popup to\n * hide if autoHide_ is true. If this is null, then the entire document is used.\n * For example, you can use a body-size div so that clicks on the browser\n * scrollbar do not dismiss the popup.\n * @type {?Element}\n * @private\n */\ngoog.ui.PopupBase.prototype.autoHideRegion_ = null;\n\n\n/**\n * Whether the popup is currently being shown.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.isVisible_ = false;\n\n\n/**\n * Whether the popup should hide itself asynchrously. This was added because\n * there are cases where hiding the element in mouse down handler in IE can\n * cause textinputs to get into a bad state if the element that had focus is\n * hidden.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.shouldHideAsync_ = false;\n\n\n/**\n * The time when the popup was last shown.\n * @type {number}\n * @private\n */\ngoog.ui.PopupBase.prototype.lastShowTime_ = -1;\n\n\n/**\n * The time when the popup was last hidden.\n * @type {number}\n * @private\n */\ngoog.ui.PopupBase.prototype.lastHideTime_ = -1;\n\n\n/**\n * Whether to hide when the escape key is pressed.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.hideOnEscape_ = false;\n\n\n/**\n * Whether to enable cross-iframe dismissal.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.enableCrossIframeDismissal_ = true;\n\n\n/**\n * The type of popup\n * @type {goog.ui.PopupBase.Type}\n * @private\n */\ngoog.ui.PopupBase.prototype.type_ = goog.ui.PopupBase.Type.TOGGLE_DISPLAY;\n\n\n/**\n * Transition to play on showing the popup.\n * @type {goog.fx.Transition|undefined}\n * @private\n */\ngoog.ui.PopupBase.prototype.showTransition_;\n\n\n/**\n * Transition to play on hiding the popup.\n * @type {goog.fx.Transition|undefined}\n * @private\n */\ngoog.ui.PopupBase.prototype.hideTransition_;\n\n\n/**\n * Constants for event type fired by Popup\n *\n * @enum {string}\n */\ngoog.ui.PopupBase.EventType = {\n  BEFORE_SHOW: 'beforeshow',\n  SHOW: 'show',\n  BEFORE_HIDE: 'beforehide',\n  HIDE: 'hide'\n};\n\n\n/**\n * A time in ms used to debounce events that happen right after each other.\n *\n * A note about why this is necessary. There are two cases to consider.\n * First case, a popup will usually see a focus event right after it's launched\n * because it's typical for it to be launched in a mouse-down event which will\n * then move focus to the launching button. We don't want to think this is a\n * separate user action moving focus. Second case, a user clicks on the\n * launcher button to close the menu. In that case, we'll close the menu in the\n * focus event and then show it again because of the mouse down event, even\n * though the intention is to just close the menu. This workaround appears to\n * be the least intrusive fix.\n *\n * @type {number}\n */\ngoog.ui.PopupBase.DEBOUNCE_DELAY_MS = 150;\n\n\n/**\n * @return {goog.ui.PopupBase.Type} The type of popup this is.\n */\ngoog.ui.PopupBase.prototype.getType = function() {\n  'use strict';\n  return this.type_;\n};\n\n\n/**\n * Specifies the type of popup to use.\n *\n * @param {goog.ui.PopupBase.Type} type Type of popup.\n */\ngoog.ui.PopupBase.prototype.setType = function(type) {\n  'use strict';\n  this.type_ = type;\n};\n\n\n/**\n * Returns whether the popup should hide itself asynchronously using a timeout\n * instead of synchronously.\n * @return {boolean} Whether to hide async.\n */\ngoog.ui.PopupBase.prototype.shouldHideAsync = function() {\n  'use strict';\n  return this.shouldHideAsync_;\n};\n\n\n/**\n * Sets whether the popup should hide itself asynchronously using a timeout\n * instead of synchronously.\n * @param {boolean} b Whether to hide async.\n */\ngoog.ui.PopupBase.prototype.setShouldHideAsync = function(b) {\n  'use strict';\n  this.shouldHideAsync_ = b;\n};\n\n\n/**\n * Returns the dom element that should be used for the popup.\n *\n * @return {Element} The popup element.\n */\ngoog.ui.PopupBase.prototype.getElement = function() {\n  'use strict';\n  return this.element_;\n};\n\n\n/**\n * Specifies the dom element that should be used for the popup.\n *\n * @param {Element} elt A DOM element for the popup.\n */\ngoog.ui.PopupBase.prototype.setElement = function(elt) {\n  'use strict';\n  this.ensureNotVisible_();\n  this.element_ = elt;\n};\n\n\n/**\n * Returns whether the Popup dismisses itself when the user clicks outside of\n * it.\n * @return {boolean} Whether the Popup autohides on an external click.\n */\ngoog.ui.PopupBase.prototype.getAutoHide = function() {\n  'use strict';\n  return this.autoHide_;\n};\n\n\n/**\n * Sets whether the Popup dismisses itself when the user clicks outside of it.\n * @param {boolean} autoHide Whether to autohide on an external click.\n */\ngoog.ui.PopupBase.prototype.setAutoHide = function(autoHide) {\n  'use strict';\n  this.ensureNotVisible_();\n  this.autoHide_ = autoHide;\n};\n\n\n/**\n * Mouse events that occur within an autoHide partner will not hide a popup\n * set to autoHide.\n * @param {!Element} partner The auto hide partner element.\n */\ngoog.ui.PopupBase.prototype.addAutoHidePartner = function(partner) {\n  'use strict';\n  if (!this.autoHidePartners_) {\n    this.autoHidePartners_ = [];\n  }\n\n  goog.array.insert(this.autoHidePartners_, partner);\n};\n\n\n/**\n * Removes a previously registered auto hide partner.\n * @param {!Element} partner The auto hide partner element.\n */\ngoog.ui.PopupBase.prototype.removeAutoHidePartner = function(partner) {\n  'use strict';\n  if (this.autoHidePartners_) {\n    goog.array.remove(this.autoHidePartners_, partner);\n  }\n};\n\n\n/**\n * @return {boolean} Whether the Popup autohides on the escape key.\n */\ngoog.ui.PopupBase.prototype.getHideOnEscape = function() {\n  'use strict';\n  return this.hideOnEscape_;\n};\n\n\n/**\n * Sets whether the Popup dismisses itself on the escape key.\n * @param {boolean} hideOnEscape Whether to autohide on the escape key.\n */\ngoog.ui.PopupBase.prototype.setHideOnEscape = function(hideOnEscape) {\n  'use strict';\n  this.ensureNotVisible_();\n  this.hideOnEscape_ = hideOnEscape;\n};\n\n\n/**\n * @return {boolean} Whether cross iframe dismissal is enabled.\n */\ngoog.ui.PopupBase.prototype.getEnableCrossIframeDismissal = function() {\n  'use strict';\n  return this.enableCrossIframeDismissal_;\n};\n\n\n/**\n * Sets whether clicks in other iframes should dismiss this popup.  In some\n * cases it should be disabled, because it can cause spurious\n * @param {boolean} enable Whether to enable cross iframe dismissal.\n */\ngoog.ui.PopupBase.prototype.setEnableCrossIframeDismissal = function(enable) {\n  'use strict';\n  this.enableCrossIframeDismissal_ = enable;\n};\n\n\n/**\n * Returns the region inside which the Popup dismisses itself when the user\n * clicks, or null if it's the entire document.\n * @return {Element} The DOM element for autohide, or null if it hasn't been\n *     set.\n */\ngoog.ui.PopupBase.prototype.getAutoHideRegion = function() {\n  'use strict';\n  return this.autoHideRegion_;\n};\n\n\n/**\n * Sets the region inside which the Popup dismisses itself when the user\n * clicks.\n * @param {Element} element The DOM element for autohide.\n */\ngoog.ui.PopupBase.prototype.setAutoHideRegion = function(element) {\n  'use strict';\n  this.autoHideRegion_ = element;\n};\n\n\n/**\n * Sets transition animation on showing and hiding the popup.\n * @param {goog.fx.Transition=} opt_showTransition Transition to play on\n *     showing the popup.\n * @param {goog.fx.Transition=} opt_hideTransition Transition to play on\n *     hiding the popup.\n */\ngoog.ui.PopupBase.prototype.setTransition = function(\n    opt_showTransition, opt_hideTransition) {\n  'use strict';\n  this.showTransition_ = opt_showTransition;\n  this.hideTransition_ = opt_hideTransition;\n};\n\n\n/**\n * Returns the time when the popup was last shown.\n *\n * @return {number} time in ms since epoch when the popup was last shown, or\n * -1 if the popup was never shown.\n */\ngoog.ui.PopupBase.prototype.getLastShowTime = function() {\n  'use strict';\n  return this.lastShowTime_;\n};\n\n\n/**\n * Returns the time when the popup was last hidden.\n *\n * @return {number} time in ms since epoch when the popup was last hidden, or\n * -1 if the popup was never hidden or is currently showing.\n */\ngoog.ui.PopupBase.prototype.getLastHideTime = function() {\n  'use strict';\n  return this.lastHideTime_;\n};\n\n\n/**\n * Returns the event handler for the popup. All event listeners belonging to\n * this handler are removed when the tooltip is hidden. Therefore,\n * the recommended usage of this handler is to listen on events in\n * {@link #onShow}.\n * @return {goog.events.EventHandler<T>} Event handler for this popup.\n * @protected\n * @this {T}\n * @template T\n */\ngoog.ui.PopupBase.prototype.getHandler = function() {\n  'use strict';\n  // As the template type is unbounded, narrow the \"this\" type\n  var self = /** @type {!goog.ui.PopupBase} */ (this);\n\n  return self.handler_;\n};\n\n\n/**\n * Helper to throw exception if the popup is showing.\n * @private\n */\ngoog.ui.PopupBase.prototype.ensureNotVisible_ = function() {\n  'use strict';\n  if (this.isVisible_) {\n    throw new Error('Can not change this state of the popup while showing.');\n  }\n};\n\n\n/**\n * Returns whether the popup is currently visible.\n *\n * @return {boolean} whether the popup is currently visible.\n */\ngoog.ui.PopupBase.prototype.isVisible = function() {\n  'use strict';\n  return this.isVisible_;\n};\n\n\n/**\n * Returns whether the popup is currently visible or was visible within about\n * 150 ms ago. This is used by clients to handle a very specific, but common,\n * popup scenario. The button that launches the popup should close the popup\n * on mouse down if the popup is already open. The problem is that the popup\n * closes itself during the capture phase of the mouse down and thus the button\n * thinks it's hidden and this should show it again. This method provides a\n * good heuristic for clients. Typically in their event handler they will have\n * code that is:\n *\n * if (menu.isOrWasRecentlyVisible()) {\n *   menu.setVisible(false);\n * } else {\n *   ... // code to position menu and initialize other state\n *   menu.setVisible(true);\n * }\n * @return {boolean} Whether the popup is currently visible or was visible\n *     within about 150 ms ago.\n */\ngoog.ui.PopupBase.prototype.isOrWasRecentlyVisible = function() {\n  'use strict';\n  return this.isVisible_ ||\n      (Date.now() - this.lastHideTime_ < goog.ui.PopupBase.DEBOUNCE_DELAY_MS);\n};\n\n\n/**\n * Sets whether the popup should be visible. After this method\n * returns, isVisible() will always return the new state, even if\n * there is a transition.\n *\n * @param {boolean} visible Desired visibility state.\n */\ngoog.ui.PopupBase.prototype.setVisible = function(visible) {\n  'use strict';\n  // Make sure that any currently running transition is stopped.\n  if (this.showTransition_) this.showTransition_.stop();\n  if (this.hideTransition_) this.hideTransition_.stop();\n\n  if (visible) {\n    this.show_();\n  } else {\n    this.hide_();\n  }\n};\n\n\n/**\n * Repositions the popup according to the current state.\n * Should be overriden by subclases.\n */\ngoog.ui.PopupBase.prototype.reposition = goog.nullFunction;\n\n\n/**\n * Does the work to show the popup.\n * @private\n */\ngoog.ui.PopupBase.prototype.show_ = function() {\n  'use strict';\n  // Ignore call if we are already showing.\n  if (this.isVisible_) {\n    return;\n  }\n\n  // Give derived classes and handlers a chance to customize popup.\n  if (!this.onBeforeShow()) {\n    return;\n  }\n\n  // Allow callers to set the element in the BEFORE_SHOW event.\n  if (!this.element_) {\n    throw new Error(\n        'Caller must call setElement before trying to show the popup');\n  }\n\n  // Call reposition after onBeforeShow, as it may change the style and/or\n  // content of the popup and thereby affecting the size which is used for the\n  // viewport calculation.\n  this.reposition();\n\n  var doc = goog.dom.getOwnerDocument(this.element_);\n\n  if (this.hideOnEscape_) {\n    // Handle the escape keys.  Listen in the capture phase so that we can\n    // stop the escape key from propagating to other elements.  For example,\n    // if there is a popup within a dialog box, we want the popup to be\n    // dismissed first, rather than the dialog.\n    this.handler_.listen(\n        doc, goog.events.EventType.KEYDOWN, this.onDocumentKeyDown_, true);\n  }\n\n  // Set up event handlers.\n  if (this.autoHide_) {\n    // Even if the popup is not in the focused document, we want to\n    // close it on mousedowns in the document it's in.\n    this.handler_.listen(\n        doc, goog.events.EventType.MOUSEDOWN, this.onDocumentMouseDown_, true);\n\n    if (goog.userAgent.IE) {\n      // We want to know about deactivates/mousedowns on the document with focus\n      // The top-level document won't get a deactivate event if the focus is\n      // in an iframe and the deactivate fires within that iframe.\n      // The active element in the top-level document will remain the iframe\n      // itself.\n      var activeElement;\n\n      try {\n        activeElement = doc.activeElement;\n      } catch (e) {\n        // There is an IE browser bug which can cause just the reading of\n        // document.activeElement to throw an Unspecified Error.  This\n        // may have to do with loading a popup within a hidden iframe.\n      }\n      while (activeElement &&\n             activeElement.nodeName == goog.dom.TagName.IFRAME) {\n\n        try {\n          var tempDoc = goog.dom.getFrameContentDocument(activeElement);\n        } catch (e) {\n          // The frame is on a different domain that its parent document\n          // This way, we grab the lowest-level document object we can get\n          // a handle on given cross-domain security.\n          break;\n        }\n        doc = tempDoc;\n        activeElement = doc.activeElement;\n      }\n\n      // Handle mousedowns in the focused document in case the user clicks\n      // on the activeElement (in which case the popup should hide).\n      this.handler_.listen(\n          doc, goog.events.EventType.MOUSEDOWN, this.onDocumentMouseDown_,\n          true);\n\n      // If the active element inside the focused document changes, then\n      // we probably need to hide the popup.\n      this.handler_.listen(\n          doc, goog.events.EventType.DEACTIVATE, this.onDocumentBlur_);\n\n    } else {\n      this.handler_.listen(\n          doc, goog.events.EventType.BLUR, this.onDocumentBlur_);\n    }\n  }\n\n  // Make the popup visible.\n  if (this.type_ == goog.ui.PopupBase.Type.TOGGLE_DISPLAY) {\n    this.showPopupElement();\n  } else if (this.type_ == goog.ui.PopupBase.Type.MOVE_OFFSCREEN) {\n    this.reposition();\n  }\n  this.isVisible_ = true;\n\n  this.lastShowTime_ = Date.now();\n  this.lastHideTime_ = -1;\n\n  // If there is transition to play, we play it and fire SHOW event after\n  // the transition is over.\n  if (this.showTransition_) {\n    goog.events.listenOnce(\n        /** @type {!goog.events.EventTarget} */ (this.showTransition_),\n        goog.fx.Transition.EventType.END, this.onShow, false, this);\n    this.showTransition_.play();\n  } else {\n    // Notify derived classes and handlers.\n    this.onShow();\n  }\n};\n\n\n/**\n * Hides the popup. This call is idempotent.\n *\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @return {boolean} Whether the popup was hidden and not cancelled.\n * @private\n */\ngoog.ui.PopupBase.prototype.hide_ = function(opt_target) {\n  'use strict';\n  // Give derived classes and handlers a chance to cancel hiding.\n  if (!this.isVisible_ || !this.onBeforeHide(opt_target)) {\n    return false;\n  }\n\n  // Remove any listeners we attached when showing the popup.\n  if (this.handler_) {\n    this.handler_.removeAll();\n  }\n\n  // Set visibility to hidden even if there is a transition.\n  this.isVisible_ = false;\n  this.lastHideTime_ = Date.now();\n\n  // If there is transition to play, we play it and only hide the element\n  // (and fire HIDE event) after the transition is over.\n  if (this.hideTransition_) {\n    goog.events.listenOnce(\n        /** @type {!goog.events.EventTarget} */ (this.hideTransition_),\n        goog.fx.Transition.EventType.END,\n        goog.partial(this.continueHidingPopup_, opt_target), false, this);\n    this.hideTransition_.play();\n  } else {\n    this.continueHidingPopup_(opt_target);\n  }\n\n  return true;\n};\n\n\n/**\n * Continues hiding the popup. This is a continuation from hide_. It is\n * a separate method so that we can add a transition before hiding.\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @private\n */\ngoog.ui.PopupBase.prototype.continueHidingPopup_ = function(opt_target) {\n  'use strict';\n  // Hide the popup.\n  if (this.type_ == goog.ui.PopupBase.Type.TOGGLE_DISPLAY) {\n    if (this.shouldHideAsync_) {\n      goog.Timer.callOnce(this.hidePopupElement, 0, this);\n    } else {\n      this.hidePopupElement();\n    }\n  } else if (this.type_ == goog.ui.PopupBase.Type.MOVE_OFFSCREEN) {\n    this.moveOffscreen_();\n  }\n\n  // Notify derived classes and handlers.\n  this.onHide(opt_target);\n};\n\n\n/**\n * Shows the popup element.\n * @protected\n */\ngoog.ui.PopupBase.prototype.showPopupElement = function() {\n  'use strict';\n  this.element_.style.visibility = 'visible';\n  goog.style.setElementShown(this.element_, true);\n};\n\n\n/**\n * Hides the popup element.\n * @protected\n */\ngoog.ui.PopupBase.prototype.hidePopupElement = function() {\n  'use strict';\n  this.element_.style.visibility = 'hidden';\n  goog.style.setElementShown(this.element_, false);\n};\n\n\n/**\n * Hides the popup by moving it offscreen.\n *\n * @private\n */\ngoog.ui.PopupBase.prototype.moveOffscreen_ = function() {\n  'use strict';\n  this.element_.style.top = '-10000px';\n};\n\n\n/**\n * Called before the popup is shown. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n *\n * @return {boolean} If anyone called preventDefault on the event object (or\n *     if any of the handlers returns false this will also return false.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onBeforeShow = function() {\n  'use strict';\n  return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW);\n};\n\n\n/**\n * Called after the popup is shown. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onShow = function() {\n  'use strict';\n  this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW);\n};\n\n\n/**\n * Called before the popup is hidden. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n *\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @return {boolean} If anyone called preventDefault on the event object (or\n *     if any of the handlers returns false this will also return false.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onBeforeHide = function(opt_target) {\n  'use strict';\n  return this.dispatchEvent(\n      {type: goog.ui.PopupBase.EventType.BEFORE_HIDE, target: opt_target});\n};\n\n\n/**\n * Called after the popup is hidden. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onHide = function(opt_target) {\n  'use strict';\n  this.dispatchEvent(\n      {type: goog.ui.PopupBase.EventType.HIDE, target: opt_target});\n};\n\n\n/**\n * Mouse down handler for the document on capture phase. Used to hide the\n * popup for auto-hide mode.\n *\n * @param {goog.events.BrowserEvent} e The event object.\n * @private\n */\ngoog.ui.PopupBase.prototype.onDocumentMouseDown_ = function(e) {\n  'use strict';\n  var target = e.target;\n\n  if (!goog.dom.contains(this.element_, target) &&\n      !this.isOrWithinAutoHidePartner_(target) &&\n      this.isWithinAutoHideRegion_(target) && !this.shouldDebounce_()) {\n    // Mouse click was outside popup and partners, so hide.\n    this.hide_(target);\n  }\n};\n\n\n/**\n * Handles key-downs on the document to handle the escape key.\n *\n * @param {goog.events.BrowserEvent} e The event object.\n * @private\n */\ngoog.ui.PopupBase.prototype.onDocumentKeyDown_ = function(e) {\n  'use strict';\n  if (e.keyCode == goog.events.KeyCodes.ESC) {\n    if (this.hide_(e.target)) {\n      // Eat the escape key, but only if this popup was actually closed.\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n};\n\n\n/**\n * Deactivate handler(IE) and blur handler (other browsers) for document.\n * Used to hide the popup for auto-hide mode.\n *\n * @param {goog.events.BrowserEvent} e The event object.\n * @private\n */\ngoog.ui.PopupBase.prototype.onDocumentBlur_ = function(e) {\n  'use strict';\n  if (!this.enableCrossIframeDismissal_) {\n    return;\n  }\n\n  var doc = goog.dom.getOwnerDocument(this.element_);\n\n  // Ignore blur events if either the active element is still inside the popup\n  // or one of its partner elements, or if there is no longer an active element.\n  // For example, a widget like a goog.ui.Button might programmatically blur\n  // itself before losing tabIndex.\n  if (typeof document.activeElement != 'undefined') {\n    var activeElement = doc.activeElement;\n    if (!activeElement || goog.dom.contains(this.element_, activeElement) ||\n        activeElement.tagName == goog.dom.TagName.BODY) {\n      return;\n    }\n\n    // IE10 differs from other browsers in that it sets the active element to\n    // the element being focused while the blur event is being handled.\n    // In this case, check if the focused element is one of this popup element's\n    // auto-hide partners. If so, do not hide the popup.\n    // Reference:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/blur_event\n    if (this.isOrWithinAutoHidePartner_(activeElement)) {\n      return;\n    }\n\n    // Ignore blur events not for the document itself in non-IE browsers.\n  } else if (e.target != doc) {\n    return;\n  }\n\n  // Debounce the initial focus move.\n  if (this.shouldDebounce_()) {\n    return;\n  }\n\n  this.hide_();\n};\n\n\n/**\n * @param {Node} element The element to inspect.\n * @return {boolean} Returns true if the given element is one of the auto hide\n *     partners or is a child of an auto hide partner.\n * @private\n */\ngoog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_ = function(element) {\n  'use strict';\n  return goog.array.some(this.autoHidePartners_ || [], function(partner) {\n    'use strict';\n    return element === partner || goog.dom.contains(partner, element);\n  });\n};\n\n\n/**\n * @param {Node} element The element to inspect.\n * @return {boolean} Returns true if the element is contained within\n *     the autohide region. If unset, the autohide region is the entire\n *     entire document.\n * @private\n */\ngoog.ui.PopupBase.prototype.isWithinAutoHideRegion_ = function(element) {\n  'use strict';\n  return this.autoHideRegion_ ?\n      goog.dom.contains(this.autoHideRegion_, element) :\n      true;\n};\n\n\n/**\n * @return {boolean} Whether the time since last show is less than the debounce\n *     delay.\n * @private\n */\ngoog.ui.PopupBase.prototype.shouldDebounce_ = function() {\n  'use strict';\n  return Date.now() - this.lastShowTime_ < goog.ui.PopupBase.DEBOUNCE_DELAY_MS;\n};\n\n\n/** @override */\ngoog.ui.PopupBase.prototype.disposeInternal = function() {\n  'use strict';\n  goog.ui.PopupBase.base(this, 'disposeInternal');\n  this.handler_.dispose();\n  goog.dispose(this.showTransition_);\n  goog.dispose(this.hideTransition_);\n  delete this.element_;\n  delete this.handler_;\n  delete this.autoHidePartners_;\n};\n"],
"names":["goog","provide","require","requireType","ui","PopupBase","goog.ui.PopupBase","opt_element","opt_type","events","EventTarget","call","handler_","EventHandler","setElement","setType","inherits","Type","TOGGLE_DISPLAY","MOVE_OFFSCREEN","prototype","element_","autoHide_","autoHidePartners_","autoHideRegion_","isVisible_","shouldHideAsync_","lastShowTime_","lastHideTime_","hideOnEscape_","enableCrossIframeDismissal_","type_","showTransition_","hideTransition_","EventType","BEFORE_SHOW","SHOW","BEFORE_HIDE","HIDE","DEBOUNCE_DELAY_MS","getType","goog.ui.PopupBase.prototype.getType","goog.ui.PopupBase.prototype.setType","type","shouldHideAsync","goog.ui.PopupBase.prototype.shouldHideAsync","setShouldHideAsync","goog.ui.PopupBase.prototype.setShouldHideAsync","b","getElement","goog.ui.PopupBase.prototype.getElement","goog.ui.PopupBase.prototype.setElement","elt","ensureNotVisible_","getAutoHide","goog.ui.PopupBase.prototype.getAutoHide","setAutoHide","goog.ui.PopupBase.prototype.setAutoHide","autoHide","addAutoHidePartner","goog.ui.PopupBase.prototype.addAutoHidePartner","partner","array","insert","removeAutoHidePartner","goog.ui.PopupBase.prototype.removeAutoHidePartner","remove","getHideOnEscape","goog.ui.PopupBase.prototype.getHideOnEscape","setHideOnEscape","goog.ui.PopupBase.prototype.setHideOnEscape","hideOnEscape","getEnableCrossIframeDismissal","goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal","setEnableCrossIframeDismissal","goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal","enable","getAutoHideRegion","goog.ui.PopupBase.prototype.getAutoHideRegion","setAutoHideRegion","goog.ui.PopupBase.prototype.setAutoHideRegion","element","setTransition","goog.ui.PopupBase.prototype.setTransition","opt_showTransition","opt_hideTransition","getLastShowTime","goog.ui.PopupBase.prototype.getLastShowTime","getLastHideTime","goog.ui.PopupBase.prototype.getLastHideTime","getHandler","goog.ui.PopupBase.prototype.getHandler","self","goog.ui.PopupBase.prototype.ensureNotVisible_","Error","isVisible","goog.ui.PopupBase.prototype.isVisible","isOrWasRecentlyVisible","goog.ui.PopupBase.prototype.isOrWasRecentlyVisible","Date","now","setVisible","goog.ui.PopupBase.prototype.setVisible","visible","stop","show_","hide_","reposition","nullFunction","goog.ui.PopupBase.prototype.show_","onBeforeShow","doc","dom","getOwnerDocument","listen","KEYDOWN","onDocumentKeyDown_","MOUSEDOWN","onDocumentMouseDown_","userAgent","IE","activeElement","e","nodeName","TagName","IFRAME","tempDoc","getFrameContentDocument","DEACTIVATE","onDocumentBlur_","BLUR","showPopupElement","listenOnce","fx","Transition","END","onShow","play","goog.ui.PopupBase.prototype.hide_","opt_target","onBeforeHide","removeAll","partial","continueHidingPopup_","goog.ui.PopupBase.prototype.continueHidingPopup_","Timer","callOnce","hidePopupElement","moveOffscreen_","onHide","goog.ui.PopupBase.prototype.showPopupElement","style","visibility","setElementShown","goog.ui.PopupBase.prototype.hidePopupElement","goog.ui.PopupBase.prototype.moveOffscreen_","top","goog.ui.PopupBase.prototype.onBeforeShow","dispatchEvent","goog.ui.PopupBase.prototype.onShow","goog.ui.PopupBase.prototype.onBeforeHide","target","goog.ui.PopupBase.prototype.onHide","goog.ui.PopupBase.prototype.onDocumentMouseDown_","contains","isOrWithinAutoHidePartner_","isWithinAutoHideRegion_","shouldDebounce_","goog.ui.PopupBase.prototype.onDocumentKeyDown_","keyCode","KeyCodes","ESC","preventDefault","stopPropagation","goog.ui.PopupBase.prototype.onDocumentBlur_","document","tagName","BODY","goog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_","some","goog.ui.PopupBase.prototype.isWithinAutoHideRegion_","goog.ui.PopupBase.prototype.shouldDebounce_","disposeInternal","goog.ui.PopupBase.prototype.disposeInternal","base","dispose"]
}
