{
"version":3,
"file":"goog.ui.control.js",
"lineCount":543,
"mappings":"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",
"sources":["goog/ui/control.js"],
"sourcesContent":["/**\n * @license\n * Copyright The Closure Library Authors.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Base class for UI controls such as buttons, menus, menu items,\n * toolbar buttons, etc.  The implementation is based on a generalized version\n * of {@link goog.ui.MenuItem}.\n * TODO(attila):  If the renderer framework works well, pull it into Component.\n *\n * @see ../demos/control.html\n * @see http://code.google.com/p/closure-library/wiki/IntroToControls\n */\n\ngoog.provide('goog.ui.Control');\n\ngoog.require('goog.Disposable');\ngoog.require('goog.array');\ngoog.require('goog.dispose');\ngoog.require('goog.dom');\ngoog.require('goog.events.BrowserEvent');\ngoog.require('goog.events.Event');\ngoog.require('goog.events.EventHandler');\ngoog.require('goog.events.EventType');\ngoog.require('goog.events.KeyCodes');\ngoog.require('goog.events.KeyHandler');\ngoog.require('goog.string');\ngoog.require('goog.ui.Component');\ngoog.require('goog.ui.ComponentUtil');\n/** @suppress {extraRequire} */\ngoog.require('goog.ui.ControlContent');\ngoog.require('goog.ui.ControlRenderer');\ngoog.require('goog.ui.registry');\ngoog.require('goog.userAgent');\ngoog.requireType('goog.a11y.aria.Role');\ngoog.requireType('goog.events.KeyEvent');\n\n\n\n/**\n * Base class for UI controls.  Extends {@link goog.ui.Component} by adding\n * the following:\n *  <ul>\n *    <li>a {@link goog.events.KeyHandler}, to simplify keyboard handling,\n *    <li>a pluggable <em>renderer</em> framework, to simplify the creation of\n *        simple controls without the need to subclass this class,\n *    <li>the notion of component <em>content</em>, like a text caption or DOM\n *        structure displayed in the component (e.g. a button label),\n *    <li>getter and setter for component content, as well as a getter and\n *        setter specifically for caption text (for convenience),\n *    <li>support for hiding/showing the component,\n      <li>fine-grained control over supported states and state transition\n          events, and\n *    <li>default mouse and keyboard event handling.\n *  </ul>\n * This class has sufficient built-in functionality for most simple UI controls.\n * All controls dispatch SHOW, HIDE, ENTER, LEAVE, and ACTION events on show,\n * hide, mouseover, mouseout, and user action, respectively.  Additional states\n * are also supported.  See closure/demos/control.html\n * for example usage.\n * @param {goog.ui.ControlContent=} opt_content Text caption or DOM structure\n *     to display as the content of the control (if any).\n * @param {goog.ui.ControlRenderer=} opt_renderer Renderer used to render or\n *     decorate the component; defaults to {@link goog.ui.ControlRenderer}.\n * @param {goog.dom.DomHelper=} opt_domHelper Optional DOM helper, used for\n *     document interaction.\n * @constructor\n * @extends {goog.ui.Component}\n */\ngoog.ui.Control = function(opt_content, opt_renderer, opt_domHelper) {\n  'use strict';\n  goog.ui.Component.call(this, opt_domHelper);\n  this.renderer_ =\n      opt_renderer || goog.ui.registry.getDefaultRenderer(this.constructor);\n  this.setContentInternal(opt_content !== undefined ? opt_content : null);\n\n  /** @private {?string} The control's aria-label. */\n  this.ariaLabel_ = null;\n\n  /** @private {goog.ui.Control.IeMouseEventSequenceSimulator_} */\n  this.ieMouseEventSequenceSimulator_;\n};\ngoog.inherits(goog.ui.Control, goog.ui.Component);\n\n\n// Renderer registry.\n// TODO(attila): Refactor existing usages inside Google in a follow-up CL.\n\n\n/**\n * Maps a CSS class name to a function that returns a new instance of\n * {@link goog.ui.Control} or a subclass thereof, suitable to decorate\n * an element that has the specified CSS class.  UI components that extend\n * {@link goog.ui.Control} and want {@link goog.ui.Container}s to be able\n * to discover and decorate elements using them should register a factory\n * function via this API.\n * @param {string} className CSS class name.\n * @param {Function} decoratorFunction Function that takes no arguments and\n *     returns a new instance of a control to decorate an element with the\n *     given class.\n * @deprecated Use {@link goog.ui.registry.setDecoratorByClassName} instead.\n */\ngoog.ui.Control.registerDecorator = goog.ui.registry.setDecoratorByClassName;\n\n\n/**\n * Takes an element and returns a new instance of {@link goog.ui.Control}\n * or a subclass, suitable to decorate it (based on the element's CSS class).\n * @param {Element} element Element to decorate.\n * @return {goog.ui.Control?} New control instance to decorate the element\n *     (null if none).\n * @deprecated Use {@link goog.ui.registry.getDecorator} instead.\n */\ngoog.ui.Control.getDecorator =\n    /** @type {function(Element): goog.ui.Control} */ (\n        goog.ui.registry.getDecorator);\n\n\n/**\n * Renderer associated with the component.\n * @type {goog.ui.ControlRenderer|undefined}\n * @private\n */\ngoog.ui.Control.prototype.renderer_;\n\n\n/**\n * Text caption or DOM structure displayed in the component.\n * @type {?goog.ui.ControlContent}\n * @private\n */\ngoog.ui.Control.prototype.content_ = null;\n\n\n/**\n * Current component state; a bit mask of {@link goog.ui.Component.State}s.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.state_ = 0x00;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s this component supports.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.supportedStates_ = goog.ui.Component.State.DISABLED |\n    goog.ui.Component.State.HOVER | goog.ui.Component.State.ACTIVE |\n    goog.ui.Component.State.FOCUSED;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s for which this component\n * provides default event handling.  For example, a component that handles\n * the HOVER state automatically will highlight itself on mouseover, whereas\n * a component that doesn't handle HOVER automatically will only dispatch\n * ENTER and LEAVE events but not call {@link setHighlighted} on itself.\n * By default, components provide default event handling for all states.\n * Controls hosted in containers (e.g. menu items in a menu, or buttons in a\n * toolbar) will typically want to have their container manage their highlight\n * state.  Selectable controls managed by a selection model will also typically\n * want their selection state to be managed by the model.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.autoStates_ = goog.ui.Component.State.ALL;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s for which this component\n * dispatches state transition events.  Because events are expensive, the\n * default behavior is to not dispatch any state transition events at all.\n * Use the {@link #setDispatchTransitionEvents} API to request transition\n * events  as needed.  Subclasses may enable transition events by default.\n * Controls hosted in containers or managed by a selection model will typically\n * want to dispatch transition events.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.statesWithTransitionEvents_ = 0x00;\n\n\n/**\n * Component visibility.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.visible_ = true;\n\n\n/**\n * Keyboard event handler.\n * @type {goog.events.KeyHandler}\n * @private\n */\ngoog.ui.Control.prototype.keyHandler_;\n\n\n/**\n * Additional class name(s) to apply to the control's root element, if any.\n * @type {Array<string>?}\n * @private\n */\ngoog.ui.Control.prototype.extraClassNames_ = null;\n\n\n/**\n * Whether the control should listen for and handle mouse events; defaults to\n * true.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.handleMouseEvents_ = true;\n\n\n/**\n * Whether the control allows text selection within its DOM.  Defaults to false.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.allowTextSelection_ = false;\n\n\n/**\n * The control's preferred ARIA role.\n * @type {?goog.a11y.aria.Role}\n * @private\n */\ngoog.ui.Control.prototype.preferredAriaRole_ = null;\n\n\n// Event handler and renderer management.\n\n\n/**\n * Returns true if the control is configured to handle its own mouse events,\n * false otherwise.  Controls not hosted in {@link goog.ui.Container}s have\n * to handle their own mouse events, but controls hosted in containers may\n * allow their parent to handle mouse events on their behalf.  Considered\n * protected; should only be used within this package and by subclasses.\n * @return {boolean} Whether the control handles its own mouse events.\n */\ngoog.ui.Control.prototype.isHandleMouseEvents = function() {\n  'use strict';\n  return this.handleMouseEvents_;\n};\n\n\n/**\n * Enables or disables mouse event handling for the control.  Containers may\n * use this method to disable mouse event handling in their child controls.\n * Considered protected; should only be used within this package and by\n * subclasses.\n * @param {boolean} enable Whether to enable or disable mouse event handling.\n */\ngoog.ui.Control.prototype.setHandleMouseEvents = function(enable) {\n  'use strict';\n  if (this.isInDocument() && enable != this.handleMouseEvents_) {\n    // Already in the document; need to update event handler.\n    this.enableMouseEventHandling_(enable);\n  }\n  this.handleMouseEvents_ = enable;\n};\n\n\n/**\n * Returns the DOM element on which the control is listening for keyboard\n * events (null if none).\n * @return {Element} Element on which the control is listening for key\n *     events.\n */\ngoog.ui.Control.prototype.getKeyEventTarget = function() {\n  'use strict';\n  // Delegate to renderer.\n  return this.renderer_.getKeyEventTarget(this);\n};\n\n\n/**\n * Returns the keyboard event handler for this component, lazily created the\n * first time this method is called.  Considered protected; should only be\n * used within this package and by subclasses.\n * @return {!goog.events.KeyHandler} Keyboard event handler for this component.\n * @protected\n */\ngoog.ui.Control.prototype.getKeyHandler = function() {\n  'use strict';\n  return this.keyHandler_ || (this.keyHandler_ = new goog.events.KeyHandler());\n};\n\n\n/**\n * Returns the renderer used by this component to render itself or to decorate\n * an existing element.\n * @return {goog.ui.ControlRenderer|undefined} Renderer used by the component\n *     (undefined if none).\n */\ngoog.ui.Control.prototype.getRenderer = function() {\n  'use strict';\n  return this.renderer_;\n};\n\n\n/**\n * Registers the given renderer with the component.  Changing renderers after\n * the component has entered the document is an error.\n * @param {goog.ui.ControlRenderer} renderer Renderer used by the component.\n * @throws {Error} If the control is already in the document.\n */\ngoog.ui.Control.prototype.setRenderer = function(renderer) {\n  'use strict';\n  if (this.isInDocument()) {\n    // Too late.\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (this.getElement()) {\n    // The component has already been rendered, but isn't yet in the document.\n    // Replace the renderer and delete the current DOM, so it can be re-rendered\n    // using the new renderer the next time someone calls render().\n    this.setElementInternal(null);\n  }\n\n  this.renderer_ = renderer;\n};\n\n\n// Support for additional styling.\n\n\n/**\n * Returns any additional class name(s) to be applied to the component's\n * root element, or null if no extra class names are needed.\n * @return {Array<string>?} Additional class names to be applied to\n *     the component's root element (null if none).\n */\ngoog.ui.Control.prototype.getExtraClassNames = function() {\n  'use strict';\n  return this.extraClassNames_;\n};\n\n\n/**\n * Adds the given class name to the list of classes to be applied to the\n * component's root element.\n * @param {string} className Additional class name to be applied to the\n *     component's root element.\n */\ngoog.ui.Control.prototype.addClassName = function(className) {\n  'use strict';\n  if (className) {\n    if (this.extraClassNames_) {\n      if (!goog.array.contains(this.extraClassNames_, className)) {\n        this.extraClassNames_.push(className);\n      }\n    } else {\n      this.extraClassNames_ = [className];\n    }\n    this.renderer_.enableExtraClassName(this, className, true);\n  }\n};\n\n\n/**\n * Removes the given class name from the list of classes to be applied to\n * the component's root element.\n * @param {string} className Class name to be removed from the component's root\n *     element.\n */\ngoog.ui.Control.prototype.removeClassName = function(className) {\n  'use strict';\n  if (className && this.extraClassNames_ &&\n      goog.array.remove(this.extraClassNames_, className)) {\n    if (this.extraClassNames_.length == 0) {\n      this.extraClassNames_ = null;\n    }\n    this.renderer_.enableExtraClassName(this, className, false);\n  }\n};\n\n\n/**\n * Adds or removes the given class name to/from the list of classes to be\n * applied to the component's root element.\n * @param {string} className CSS class name to add or remove.\n * @param {boolean} enable Whether to add or remove the class name.\n */\ngoog.ui.Control.prototype.enableClassName = function(className, enable) {\n  'use strict';\n  if (enable) {\n    this.addClassName(className);\n  } else {\n    this.removeClassName(className);\n  }\n};\n\n\n// Standard goog.ui.Component implementation.\n\n\n/**\n * Creates the control's DOM.  Overrides {@link goog.ui.Component#createDom} by\n * delegating DOM manipulation to the control's renderer.\n * @override\n */\ngoog.ui.Control.prototype.createDom = function() {\n  'use strict';\n  var element = this.renderer_.createDom(this);\n  this.setElementInternal(element);\n\n  // Initialize ARIA role.\n  this.renderer_.setAriaRole(element, this.getPreferredAriaRole());\n\n  // Initialize text selection.\n  if (!this.isAllowTextSelection()) {\n    // The renderer is assumed to create selectable elements.  Since making\n    // elements unselectable is expensive, only do it if needed (bug 1037090).\n    this.renderer_.setAllowTextSelection(element, false);\n  }\n\n  // Initialize visibility.\n  if (!this.isVisible()) {\n    // The renderer is assumed to create visible elements. Since hiding\n    // elements can be expensive, only do it if needed (bug 1037105).\n    this.renderer_.setVisible(element, false);\n  }\n};\n\n\n/**\n * Returns the control's preferred ARIA role. This can be used by a control to\n * override the role that would be assigned by the renderer.  This is useful in\n * cases where a different ARIA role is appropriate for a control because of the\n * context in which it's used.  E.g., a {@link goog.ui.MenuButton} added to a\n * {@link goog.ui.Select} should have an ARIA role of LISTBOX and not MENUITEM.\n * @return {?goog.a11y.aria.Role} This control's preferred ARIA role or null if\n *     no preferred ARIA role is set.\n */\ngoog.ui.Control.prototype.getPreferredAriaRole = function() {\n  'use strict';\n  return this.preferredAriaRole_;\n};\n\n\n/**\n * Sets the control's preferred ARIA role. This can be used to override the role\n * that would be assigned by the renderer.  This is useful in cases where a\n * different ARIA role is appropriate for a control because of the\n * context in which it's used.  E.g., a {@link goog.ui.MenuButton} added to a\n * {@link goog.ui.Select} should have an ARIA role of LISTBOX and not MENUITEM.\n * @param {goog.a11y.aria.Role} role This control's preferred ARIA role.\n */\ngoog.ui.Control.prototype.setPreferredAriaRole = function(role) {\n  'use strict';\n  this.preferredAriaRole_ = role;\n};\n\n\n/**\n * Gets the control's aria label.\n * @return {?string} This control's aria label.\n */\ngoog.ui.Control.prototype.getAriaLabel = function() {\n  'use strict';\n  return this.ariaLabel_;\n};\n\n\n/**\n * Sets the control's aria label. This can be used to assign aria label to the\n * element after it is rendered.\n * @param {string} label The string to set as the aria label for this control.\n *     No escaping is done on this value.\n */\ngoog.ui.Control.prototype.setAriaLabel = function(label) {\n  'use strict';\n  this.ariaLabel_ = label;\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setAriaLabel(element, label);\n  }\n};\n\n\n/**\n * Returns the DOM element into which child components are to be rendered,\n * or null if the control itself hasn't been rendered yet.  Overrides\n * {@link goog.ui.Component#getContentElement} by delegating to the renderer.\n * @return {Element} Element to contain child elements (null if none).\n * @override\n */\ngoog.ui.Control.prototype.getContentElement = function() {\n  'use strict';\n  // Delegate to renderer.\n  return this.renderer_.getContentElement(this.getElement());\n};\n\n\n/**\n * Returns true if the given element can be decorated by this component.\n * Overrides {@link goog.ui.Component#canDecorate}.\n * @param {Element} element Element to decorate.\n * @return {boolean} Whether the element can be decorated by this component.\n * @override\n */\ngoog.ui.Control.prototype.canDecorate = function(element) {\n  'use strict';\n  // Controls support pluggable renderers; delegate to the renderer.\n  return this.renderer_.canDecorate(element);\n};\n\n\n/**\n * Decorates the given element with this component. Overrides {@link\n * goog.ui.Component#decorateInternal} by delegating DOM manipulation\n * to the control's renderer.\n * @param {Element} element Element to decorate.\n * @protected\n * @override\n */\ngoog.ui.Control.prototype.decorateInternal = function(element) {\n  'use strict';\n  element = this.renderer_.decorate(this, element);\n  this.setElementInternal(element);\n\n  // Initialize ARIA role.\n  this.renderer_.setAriaRole(element, this.getPreferredAriaRole());\n\n  // Initialize text selection.\n  if (!this.isAllowTextSelection()) {\n    // Decorated elements are assumed to be selectable.  Since making elements\n    // unselectable is expensive, only do it if needed (bug 1037090).\n    this.renderer_.setAllowTextSelection(element, false);\n  }\n\n  // Initialize visibility based on the decorated element's styling.\n  this.visible_ = element.style.display != 'none';\n};\n\n\n/**\n * Configures the component after its DOM has been rendered, and sets up event\n * handling.  Overrides {@link goog.ui.Component#enterDocument}.\n * @override\n */\ngoog.ui.Control.prototype.enterDocument = function() {\n  'use strict';\n  goog.ui.Control.superClass_.enterDocument.call(this);\n\n  // Call the renderer's setAriaStates method to set element's aria attributes.\n  this.renderer_.setAriaStates(this, this.getElementStrict());\n\n  // Call the renderer's initializeDom method to configure properties of the\n  // control's DOM that can only be done once it's in the document.\n  this.renderer_.initializeDom(this);\n\n  // Initialize event handling if at least one state other than DISABLED is\n  // supported.\n  if (this.supportedStates_ & ~goog.ui.Component.State.DISABLED) {\n    // Initialize mouse event handling if the control is configured to handle\n    // its own mouse events.  (Controls hosted in containers don't need to\n    // handle their own mouse events.)\n    if (this.isHandleMouseEvents()) {\n      this.enableMouseEventHandling_(true);\n    }\n\n    // Initialize keyboard event handling if the control is focusable and has\n    // a key event target.  (Controls hosted in containers typically aren't\n    // focusable, allowing their container to handle keyboard events for them.)\n    if (this.isSupportedState(goog.ui.Component.State.FOCUSED)) {\n      var keyTarget = this.getKeyEventTarget();\n      if (keyTarget) {\n        var keyHandler = this.getKeyHandler();\n        keyHandler.attach(keyTarget);\n        this.getHandler()\n            .listen(\n                keyHandler, goog.events.KeyHandler.EventType.KEY,\n                this.handleKeyEvent)\n            .listen(keyTarget, goog.events.EventType.FOCUS, this.handleFocus)\n            .listen(keyTarget, goog.events.EventType.BLUR, this.handleBlur);\n      }\n    }\n  }\n};\n\n\n/**\n * Enables or disables mouse event handling on the control.\n * @param {boolean} enable Whether to enable mouse event handling.\n * @private\n */\ngoog.ui.Control.prototype.enableMouseEventHandling_ = function(enable) {\n  'use strict';\n  var MouseEventType = goog.ui.ComponentUtil.getMouseEventType(this);\n\n  var handler = this.getHandler();\n  var element = this.getElement();\n  if (enable) {\n    handler.listen(element, MouseEventType.MOUSEDOWN, this.handleMouseDown)\n        .listen(\n            element, [MouseEventType.MOUSEUP, MouseEventType.MOUSECANCEL],\n            this.handleMouseUp)\n        .listen(element, goog.events.EventType.MOUSEOVER, this.handleMouseOver)\n        .listen(element, goog.events.EventType.MOUSEOUT, this.handleMouseOut);\n    if (this.pointerEventsEnabled()) {\n      // Prevent pointer events from capturing the target element so they behave\n      // more like mouse events.\n      handler.listen(\n          element, goog.events.EventType.GOTPOINTERCAPTURE,\n          this.preventPointerCapture_);\n    }\n    if (this.handleContextMenu != goog.nullFunction) {\n      handler.listen(\n          element, goog.events.EventType.CONTEXTMENU, this.handleContextMenu);\n    }\n    if (goog.userAgent.IE) {\n      // Versions of IE before 9 send only one click event followed by a\n      // dblclick, so we must explicitly listen for these. In later versions,\n      // two click events are fired  and so a dblclick listener is unnecessary.\n      if (!goog.userAgent.isVersionOrHigher(9)) {\n        handler.listen(\n            element, goog.events.EventType.DBLCLICK, this.handleDblClick);\n      }\n      if (!this.ieMouseEventSequenceSimulator_) {\n        this.ieMouseEventSequenceSimulator_ =\n            new goog.ui.Control.IeMouseEventSequenceSimulator_(this);\n        this.registerDisposable(this.ieMouseEventSequenceSimulator_);\n      }\n    }\n  } else {\n    handler.unlisten(element, MouseEventType.MOUSEDOWN, this.handleMouseDown)\n        .unlisten(\n            element, [MouseEventType.MOUSEUP, MouseEventType.MOUSECANCEL],\n            this.handleMouseUp)\n        .unlisten(\n            element, goog.events.EventType.MOUSEOVER, this.handleMouseOver)\n        .unlisten(element, goog.events.EventType.MOUSEOUT, this.handleMouseOut);\n    if (this.pointerEventsEnabled()) {\n      handler.unlisten(\n          element, goog.events.EventType.GOTPOINTERCAPTURE,\n          this.preventPointerCapture_);\n    }\n    if (this.handleContextMenu != goog.nullFunction) {\n      handler.unlisten(\n          element, goog.events.EventType.CONTEXTMENU, this.handleContextMenu);\n    }\n    if (goog.userAgent.IE) {\n      if (!goog.userAgent.isVersionOrHigher(9)) {\n        handler.unlisten(\n            element, goog.events.EventType.DBLCLICK, this.handleDblClick);\n      }\n      goog.dispose(this.ieMouseEventSequenceSimulator_);\n      this.ieMouseEventSequenceSimulator_ = null;\n    }\n  }\n};\n\n\n/**\n * Cleans up the component before its DOM is removed from the document, and\n * removes event handlers.  Overrides {@link goog.ui.Component#exitDocument}\n * by making sure that components that are removed from the document aren't\n * focusable (i.e. have no tab index).\n * @override\n */\ngoog.ui.Control.prototype.exitDocument = function() {\n  'use strict';\n  goog.ui.Control.superClass_.exitDocument.call(this);\n  if (this.keyHandler_) {\n    this.keyHandler_.detach();\n  }\n  if (this.isVisible() && this.isEnabled()) {\n    this.renderer_.setFocusable(this, false);\n  }\n};\n\n\n/** @override */\ngoog.ui.Control.prototype.disposeInternal = function() {\n  'use strict';\n  goog.ui.Control.superClass_.disposeInternal.call(this);\n  if (this.keyHandler_) {\n    this.keyHandler_.dispose();\n    delete this.keyHandler_;\n  }\n  delete this.renderer_;\n  this.content_ = null;\n  this.extraClassNames_ = null;\n  this.ieMouseEventSequenceSimulator_ = null;\n};\n\n\n// Component content management.\n\n\n/**\n * Returns the text caption or DOM structure displayed in the component.\n * @return {goog.ui.ControlContent} Text caption or DOM structure\n *     comprising the component's contents.\n */\ngoog.ui.Control.prototype.getContent = function() {\n  'use strict';\n  return this.content_;\n};\n\n\n/**\n * Sets the component's content to the given text caption, element, or array of\n * nodes.  (If the argument is an array of nodes, it must be an actual array,\n * not an array-like object.)\n * @param {goog.ui.ControlContent} content Text caption or DOM\n *     structure to set as the component's contents.\n */\ngoog.ui.Control.prototype.setContent = function(content) {\n  'use strict';\n  // Controls support pluggable renderers; delegate to the renderer.\n  this.renderer_.setContent(this.getElement(), content);\n\n  // setContentInternal needs to be after the renderer, since the implementation\n  // may depend on the content being in the DOM.\n  this.setContentInternal(content);\n};\n\n\n/**\n * Sets the component's content to the given text caption, element, or array\n * of nodes.  Unlike {@link #setContent}, doesn't modify the component's DOM.\n * Called by renderers during element decoration.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {goog.ui.ControlContent} content Text caption or DOM structure\n *     to set as the component's contents.\n */\ngoog.ui.Control.prototype.setContentInternal = function(content) {\n  'use strict';\n  this.content_ = content;\n};\n\n\n/**\n * @return {string} Text caption of the control or empty string if none.\n */\ngoog.ui.Control.prototype.getCaption = function() {\n  'use strict';\n  var content = this.getContent();\n  if (!content) {\n    return '';\n  }\n  var caption = (typeof content === 'string') ?\n      content :\n      Array.isArray(content) ?\n      content.map(goog.dom.getRawTextContent).join('') :\n      goog.dom.getTextContent(/** @type {!Node} */ (content));\n  return goog.string.collapseBreakingSpaces(caption);\n};\n\n\n/**\n * Sets the text caption of the component.\n * @param {string} caption Text caption of the component.\n */\ngoog.ui.Control.prototype.setCaption = function(caption) {\n  'use strict';\n  this.setContent(caption);\n};\n\n\n// Component state management.\n\n\n/** @override */\ngoog.ui.Control.prototype.setRightToLeft = function(rightToLeft) {\n  'use strict';\n  // The superclass implementation ensures the control isn't in the document.\n  goog.ui.Control.superClass_.setRightToLeft.call(this, rightToLeft);\n\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setRightToLeft(element, rightToLeft);\n  }\n};\n\n\n/**\n * Returns true if the control allows text selection within its DOM, false\n * otherwise.  Controls that disallow text selection have the appropriate\n * unselectable styling applied to their elements.  Note that controls hosted\n * in containers will report that they allow text selection even if their\n * container disallows text selection.\n * @return {boolean} Whether the control allows text selection.\n */\ngoog.ui.Control.prototype.isAllowTextSelection = function() {\n  'use strict';\n  return this.allowTextSelection_;\n};\n\n\n/**\n * Allows or disallows text selection within the control's DOM.\n * @param {boolean} allow Whether the control should allow text selection.\n */\ngoog.ui.Control.prototype.setAllowTextSelection = function(allow) {\n  'use strict';\n  this.allowTextSelection_ = allow;\n\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setAllowTextSelection(element, allow);\n  }\n};\n\n\n/**\n * Returns true if the component's visibility is set to visible, false if\n * it is set to hidden.  A component that is set to hidden is guaranteed\n * to be hidden from the user, but the reverse isn't necessarily true.\n * A component may be set to visible but can otherwise be obscured by another\n * element, rendered off-screen, or hidden using direct CSS manipulation.\n * @return {boolean} Whether the component is visible.\n */\ngoog.ui.Control.prototype.isVisible = function() {\n  'use strict';\n  return this.visible_;\n};\n\n\n/**\n * Shows or hides the component.  Does nothing if the component already has\n * the requested visibility.  Otherwise, dispatches a SHOW or HIDE event as\n * appropriate, giving listeners a chance to prevent the visibility change.\n * When showing a component that is both enabled and focusable, ensures that\n * its key target has a tab index.  When hiding a component that is enabled\n * and focusable, blurs its key target and removes its tab index.\n * @param {boolean} visible Whether to show or hide the component.\n * @param {boolean=} opt_force If true, doesn't check whether the component\n *     already has the requested visibility, and doesn't dispatch any events.\n * @return {boolean} Whether the visibility was changed.\n */\ngoog.ui.Control.prototype.setVisible = function(visible, opt_force) {\n  'use strict';\n  if (opt_force ||\n      (this.visible_ != visible &&\n       this.dispatchEvent(\n           visible ? goog.ui.Component.EventType.SHOW :\n                     goog.ui.Component.EventType.HIDE))) {\n    var element = this.getElement();\n    if (element) {\n      this.renderer_.setVisible(element, visible);\n    }\n    if (this.isEnabled()) {\n      this.renderer_.setFocusable(this, visible);\n    }\n    this.visible_ = visible;\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Returns true if the component is enabled, false otherwise.\n * @return {boolean} Whether the component is enabled.\n */\ngoog.ui.Control.prototype.isEnabled = function() {\n  'use strict';\n  return !this.hasState(goog.ui.Component.State.DISABLED);\n};\n\n\n/**\n * Returns true if the control has a parent that is itself disabled, false\n * otherwise.\n * @return {boolean} Whether the component is hosted in a disabled container.\n * @private\n */\ngoog.ui.Control.prototype.isParentDisabled_ = function() {\n  'use strict';\n  var parent = this.getParent();\n  return !!parent && typeof parent.isEnabled == 'function' &&\n      !parent.isEnabled();\n};\n\n\n/**\n * Enables or disables the component.  Does nothing if this state transition\n * is disallowed.  If the component is both visible and focusable, updates its\n * focused state and tab index as needed.  If the component is being disabled,\n * ensures that it is also deactivated and un-highlighted first.  Note that the\n * component's enabled/disabled state is \"locked\" as long as it is hosted in a\n * {@link goog.ui.Container} that is itself disabled; this is to prevent clients\n * from accidentally re-enabling a control that is in a disabled container.\n * @param {boolean} enable Whether to enable or disable the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setEnabled = function(enable) {\n  'use strict';\n  if (!this.isParentDisabled_() &&\n      this.isTransitionAllowed(goog.ui.Component.State.DISABLED, !enable)) {\n    if (!enable) {\n      this.setActive(false);\n      this.setHighlighted(false);\n    }\n    if (this.isVisible()) {\n      this.renderer_.setFocusable(this, enable);\n    }\n    this.setState(goog.ui.Component.State.DISABLED, !enable, true);\n  }\n};\n\n\n/**\n * Returns true if the component is currently highlighted, false otherwise.\n * @return {boolean} Whether the component is highlighted.\n */\ngoog.ui.Control.prototype.isHighlighted = function() {\n  'use strict';\n  return this.hasState(goog.ui.Component.State.HOVER);\n};\n\n\n/**\n * Highlights or unhighlights the component.  Does nothing if this state\n * transition is disallowed.\n * @param {boolean} highlight Whether to highlight or unhighlight the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setHighlighted = function(highlight) {\n  'use strict';\n  if (this.isTransitionAllowed(goog.ui.Component.State.HOVER, highlight)) {\n    this.setState(goog.ui.Component.State.HOVER, highlight);\n  }\n};\n\n\n/**\n * Returns true if the component is active (pressed), false otherwise.\n * @return {boolean} Whether the component is active.\n */\ngoog.ui.Control.prototype.isActive = function() {\n  'use strict';\n  return this.hasState(goog.ui.Component.State.ACTIVE);\n};\n\n\n/**\n * Activates or deactivates the component.  Does nothing if this state\n * transition is disallowed.\n * @param {boolean} active Whether to activate or deactivate the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setActive = function(active) {\n  'use strict';\n  if (this.isTransitionAllowed(goog.ui.Component.State.ACTIVE, active)) {\n    this.setState(goog.ui.Component.State.ACTIVE, active);\n  }\n};\n\n\n/**\n * Returns true if the component is selected, false otherwise.\n * @return {boolean} Whether the component is selected.\n */\ngoog.ui.Control.prototype.isSelected = function() {\n  'use strict';\n  return this.hasState(goog.ui.Component.State.SELECTED);\n};\n\n\n/**\n * Selects or unselects the component.  Does nothing if this state transition\n * is disallowed.\n * @param {boolean} select Whether to select or unselect the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setSelected = function(select) {\n  'use strict';\n  if (this.isTransitionAllowed(goog.ui.Component.State.SELECTED, select)) {\n    this.setState(goog.ui.Component.State.SELECTED, select);\n  }\n};\n\n\n/**\n * Returns true if the component is checked, false otherwise.\n * @return {boolean} Whether the component is checked.\n */\ngoog.ui.Control.prototype.isChecked = function() {\n  'use strict';\n  return this.hasState(goog.ui.Component.State.CHECKED);\n};\n\n\n/**\n * Checks or unchecks the component.  Does nothing if this state transition\n * is disallowed.\n * @param {boolean} check Whether to check or uncheck the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setChecked = function(check) {\n  'use strict';\n  if (this.isTransitionAllowed(goog.ui.Component.State.CHECKED, check)) {\n    this.setState(goog.ui.Component.State.CHECKED, check);\n  }\n};\n\n\n/**\n * Returns true if the component is styled to indicate that it has keyboard\n * focus, false otherwise.  Note that `isFocused()` returning true\n * doesn't guarantee that the component's key event target has keyboard focus,\n * only that it is styled as such.\n * @return {boolean} Whether the component is styled to indicate as having\n *     keyboard focus.\n */\ngoog.ui.Control.prototype.isFocused = function() {\n  'use strict';\n  return this.hasState(goog.ui.Component.State.FOCUSED);\n};\n\n\n/**\n * Applies or removes styling indicating that the component has keyboard focus.\n * Note that unlike the other \"set\" methods, this method is called as a result\n * of the component's element having received or lost keyboard focus, not the\n * other way around, so calling `setFocused(true)` doesn't guarantee that\n * the component's key event target has keyboard focus, only that it is styled\n * as such.\n * @param {boolean} focused Whether to apply or remove styling to indicate that\n *     the component's element has keyboard focus.\n */\ngoog.ui.Control.prototype.setFocused = function(focused) {\n  'use strict';\n  if (this.isTransitionAllowed(goog.ui.Component.State.FOCUSED, focused)) {\n    this.setState(goog.ui.Component.State.FOCUSED, focused);\n  }\n};\n\n\n/**\n * Returns true if the component is open (expanded), false otherwise.\n * @return {boolean} Whether the component is open.\n */\ngoog.ui.Control.prototype.isOpen = function() {\n  'use strict';\n  return this.hasState(goog.ui.Component.State.OPENED);\n};\n\n\n/**\n * Opens (expands) or closes (collapses) the component.  Does nothing if this\n * state transition is disallowed.\n * @param {boolean} open Whether to open or close the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setOpen = function(open) {\n  'use strict';\n  if (this.isTransitionAllowed(goog.ui.Component.State.OPENED, open)) {\n    this.setState(goog.ui.Component.State.OPENED, open);\n  }\n};\n\n\n/**\n * Returns the component's state as a bit mask of {@link\n * goog.ui.Component.State}s.\n * @return {number} Bit mask representing component state.\n */\ngoog.ui.Control.prototype.getState = function() {\n  'use strict';\n  return this.state_;\n};\n\n\n/**\n * Returns true if the component is in the specified state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component is in the given state.\n */\ngoog.ui.Control.prototype.hasState = function(state) {\n  'use strict';\n  return !!(this.state_ & state);\n};\n\n\n/**\n * Sets or clears the given state on the component, and updates its styling\n * accordingly.  Does nothing if the component is already in the correct state\n * or if it doesn't support the specified state.  Doesn't dispatch any state\n * transition events; use advisedly.\n * @param {goog.ui.Component.State} state State to set or clear.\n * @param {boolean} enable Whether to set or clear the state (if supported).\n * @param {boolean=} opt_calledFrom Prevents looping with setEnabled.\n */\ngoog.ui.Control.prototype.setState = function(state, enable, opt_calledFrom) {\n  'use strict';\n  if (!opt_calledFrom && state == goog.ui.Component.State.DISABLED) {\n    this.setEnabled(!enable);\n    return;\n  }\n  if (this.isSupportedState(state) && enable != this.hasState(state)) {\n    // Delegate actual styling to the renderer, since it is DOM-specific.\n    this.renderer_.setState(this, state, enable);\n    this.state_ = enable ? this.state_ | state : this.state_ & ~state;\n  }\n};\n\n\n/**\n * Sets the component's state to the state represented by a bit mask of\n * {@link goog.ui.Component.State}s.  Unlike {@link #setState}, doesn't\n * update the component's styling, and doesn't reject unsupported states.\n * Called by renderers during element decoration.  Considered protected;\n * should only be used within this package and by subclasses.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {number} state Bit mask representing component state.\n */\ngoog.ui.Control.prototype.setStateInternal = function(state) {\n  'use strict';\n  this.state_ = state;\n};\n\n\n/**\n * Returns true if the component supports the specified state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component supports the given state.\n */\ngoog.ui.Control.prototype.isSupportedState = function(state) {\n  'use strict';\n  return !!(this.supportedStates_ & state);\n};\n\n\n/**\n * Enables or disables support for the given state. Disabling support\n * for a state while the component is in that state is an error.\n * @param {goog.ui.Component.State} state State to support or de-support.\n * @param {boolean} support Whether the component should support the state.\n * @throws {Error} If disabling support for a state the control is currently in.\n */\ngoog.ui.Control.prototype.setSupportedState = function(state, support) {\n  'use strict';\n  if (this.isInDocument() && this.hasState(state) && !support) {\n    // Since we hook up event handlers in enterDocument(), this is an error.\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (!support && this.hasState(state)) {\n    // We are removing support for a state that the component is currently in.\n    this.setState(state, false);\n  }\n\n  this.supportedStates_ =\n      support ? this.supportedStates_ | state : this.supportedStates_ & ~state;\n};\n\n\n/**\n * Returns true if the component provides default event handling for the state,\n * false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component provides default event handling for\n *     the state.\n */\ngoog.ui.Control.prototype.isAutoState = function(state) {\n  'use strict';\n  return !!(this.autoStates_ & state) && this.isSupportedState(state);\n};\n\n\n/**\n * Enables or disables automatic event handling for the given state(s).\n * @param {number} states Bit mask of {@link goog.ui.Component.State}s for which\n *     default event handling is to be enabled or disabled.\n * @param {boolean} enable Whether the component should provide default event\n *     handling for the state(s).\n */\ngoog.ui.Control.prototype.setAutoStates = function(states, enable) {\n  'use strict';\n  this.autoStates_ =\n      enable ? this.autoStates_ | states : this.autoStates_ & ~states;\n};\n\n\n/**\n * Returns true if the component is set to dispatch transition events for the\n * given state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component dispatches transition events for\n *     the state.\n */\ngoog.ui.Control.prototype.isDispatchTransitionEvents = function(state) {\n  'use strict';\n  return !!(this.statesWithTransitionEvents_ & state) &&\n      this.isSupportedState(state);\n};\n\n\n/**\n * Enables or disables transition events for the given state(s).  Controls\n * handle state transitions internally by default, and only dispatch state\n * transition events if explicitly requested to do so by calling this method.\n * @param {number} states Bit mask of {@link goog.ui.Component.State}s for\n *     which transition events should be enabled or disabled.\n * @param {boolean} enable Whether transition events should be enabled.\n */\ngoog.ui.Control.prototype.setDispatchTransitionEvents = function(\n    states, enable) {\n  'use strict';\n  this.statesWithTransitionEvents_ = enable ?\n      this.statesWithTransitionEvents_ | states :\n      this.statesWithTransitionEvents_ & ~states;\n};\n\n\n/**\n * Returns true if the transition into or out of the given state is allowed to\n * proceed, false otherwise.  A state transition is allowed under the following\n * conditions:\n * <ul>\n *   <li>the component supports the state,\n *   <li>the component isn't already in the target state,\n *   <li>either the component is configured not to dispatch events for this\n *       state transition, or a transition event was dispatched and wasn't\n *       canceled by any event listener, and\n *   <li>the component hasn't been disposed of\n * </ul>\n * Considered protected; should only be used within this package and by\n * subclasses.\n * @param {goog.ui.Component.State} state State to/from which the control is\n *     transitioning.\n * @param {boolean} enable Whether the control is entering or leaving the state.\n * @return {boolean} Whether the state transition is allowed to proceed.\n * @protected\n */\ngoog.ui.Control.prototype.isTransitionAllowed = function(state, enable) {\n  'use strict';\n  return this.isSupportedState(state) && this.hasState(state) != enable &&\n      (!(this.statesWithTransitionEvents_ & state) ||\n       this.dispatchEvent(\n           goog.ui.Component.getStateTransitionEvent(state, enable))) &&\n      !this.isDisposed();\n};\n\n\n// Default event handlers, to be overridden in subclasses.\n\n\n/**\n * Handles mouseover events.  Dispatches an ENTER event; if the event isn't\n * canceled, the component is enabled, and it supports auto-highlighting,\n * highlights the component.  Considered protected; should only be used\n * within this package and by subclasses.\n * @param {goog.events.BrowserEvent} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseOver = function(e) {\n  'use strict';\n  // Ignore mouse moves between descendants.\n  if (!goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) &&\n      this.dispatchEvent(goog.ui.Component.EventType.ENTER) &&\n      this.isEnabled() && this.isAutoState(goog.ui.Component.State.HOVER)) {\n    this.setHighlighted(true);\n  }\n};\n\n\n/**\n * Handles mouseout events.  Dispatches a LEAVE event; if the event isn't\n * canceled, and the component supports auto-highlighting, deactivates and\n * un-highlights the component.  Considered protected; should only be used\n * within this package and by subclasses.\n * @param {goog.events.BrowserEvent} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseOut = function(e) {\n  'use strict';\n  if (!goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) &&\n      this.dispatchEvent(goog.ui.Component.EventType.LEAVE)) {\n    if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n      // Deactivate on mouseout; otherwise we lose track of the mouse button.\n      this.setActive(false);\n    }\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(false);\n    }\n  }\n};\n\n\n/**\n * @param {!goog.events.BrowserEvent} e Event to handle.\n * @private\n */\ngoog.ui.Control.prototype.preventPointerCapture_ = function(e) {\n  'use strict';\n  var elem = /** @type {!Element} */ (e.target);\n  if (!!elem.releasePointerCapture) {\n    elem.releasePointerCapture(e.pointerId);\n  }\n};\n\n\n/**\n * Handles contextmenu events.\n * @param {goog.events.BrowserEvent} e Event to handle.\n */\ngoog.ui.Control.prototype.handleContextMenu = goog.nullFunction;\n\n\n/**\n * Checks if a mouse event (mouseover or mouseout) occurred below an element.\n * @param {goog.events.BrowserEvent} e Mouse event (should be mouseover or\n *     mouseout).\n * @param {Element} elem The ancestor element.\n * @return {boolean} Whether the event has a relatedTarget (the element the\n *     mouse is coming from) and it's a descendant of elem.\n * @private\n */\ngoog.ui.Control.isMouseEventWithinElement_ = function(e, elem) {\n  'use strict';\n  // If relatedTarget is null, it means there was no previous element (e.g.\n  // the mouse moved out of the window).  Assume this means that the mouse\n  // event was not within the element.\n  return !!e.relatedTarget && goog.dom.contains(elem, e.relatedTarget);\n};\n\n\n/**\n * Handles mousedown events.  If the component is enabled, highlights and\n * activates it.  If the component isn't configured for keyboard access,\n * prevents it from receiving keyboard focus.  Considered protected; should\n * only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseDown = function(e) {\n  'use strict';\n  if (this.isEnabled()) {\n    // Highlight enabled control on mousedown, regardless of the mouse button.\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(true);\n    }\n\n    // For the left button only, activate the control, and focus its key event\n    // target (if supported).\n    if (e.isMouseActionButton()) {\n      if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n        this.setActive(true);\n      }\n      if (this.renderer_ && this.renderer_.isFocusable(this)) {\n        this.getKeyEventTarget().focus();\n      }\n    }\n  }\n\n  // Cancel the default action unless the control allows text selection.\n  if (!this.isAllowTextSelection() && e.isMouseActionButton()) {\n    e.preventDefault();\n  }\n};\n\n\n/**\n * Handles mouseup events.  If the component is enabled, highlights it.  If\n * the component has previously been activated, performs its associated action\n * by calling {@link performActionInternal}, then deactivates it.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseUp = function(e) {\n  'use strict';\n  if (this.isEnabled()) {\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(true);\n    }\n    if (this.isActive() && this.performActionInternal(e) &&\n        this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n      this.setActive(false);\n    }\n  }\n};\n\n\n/**\n * Handles dblclick events.  Should only be registered if the user agent is\n * IE.  If the component is enabled, performs its associated action by calling\n * {@link performActionInternal}.  This is used to allow more performant\n * buttons in IE.  In IE, no mousedown event is fired when that mousedown will\n * trigger a dblclick event.  Because of this, a user clicking quickly will\n * only cause ACTION events to fire on every other click.  This is a workaround\n * to generate ACTION events for every click.  Unfortunately, this workaround\n * won't ever trigger the ACTIVE state.  This is roughly the same behaviour as\n * if this were a 'button' element with a listener on mouseup.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleDblClick = function(e) {\n  'use strict';\n  if (this.isEnabled()) {\n    this.performActionInternal(e);\n  }\n};\n\n\n/**\n * Performs the appropriate action when the control is activated by the user.\n * The default implementation first updates the checked and selected state of\n * controls that support them, then dispatches an ACTION event.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Event that triggered the action.\n * @return {boolean} Whether the action is allowed to proceed.\n * @protected\n */\ngoog.ui.Control.prototype.performActionInternal = function(e) {\n  'use strict';\n  if (this.isAutoState(goog.ui.Component.State.CHECKED)) {\n    this.setChecked(!this.isChecked());\n  }\n  if (this.isAutoState(goog.ui.Component.State.SELECTED)) {\n    this.setSelected(true);\n  }\n  if (this.isAutoState(goog.ui.Component.State.OPENED)) {\n    this.setOpen(!this.isOpen());\n  }\n\n  var actionEvent =\n      new goog.events.Event(goog.ui.Component.EventType.ACTION, this);\n  if (e) {\n    actionEvent.altKey = e.altKey;\n    actionEvent.ctrlKey = e.ctrlKey;\n    actionEvent.metaKey = e.metaKey;\n    actionEvent.shiftKey = e.shiftKey;\n    actionEvent.platformModifierKey = e.platformModifierKey;\n  }\n  return this.dispatchEvent(actionEvent);\n};\n\n\n/**\n * Handles focus events on the component's key event target element.  If the\n * component is focusable, updates its state and styling to indicate that it\n * now has keyboard focus.  Considered protected; should only be used within\n * this package and by subclasses.  <b>Warning:</b> IE dispatches focus and\n * blur events asynchronously!\n * @param {goog.events.Event} e Focus event to handle.\n */\ngoog.ui.Control.prototype.handleFocus = function(e) {\n  'use strict';\n  if (this.isAutoState(goog.ui.Component.State.FOCUSED)) {\n    this.setFocused(true);\n  }\n};\n\n\n/**\n * Handles blur events on the component's key event target element.  Always\n * deactivates the component.  In addition, if the component is focusable,\n * updates its state and styling to indicate that it no longer has keyboard\n * focus.  Considered protected; should only be used within this package and\n * by subclasses.  <b>Warning:</b> IE dispatches focus and blur events\n * asynchronously!\n * @param {goog.events.Event} e Blur event to handle.\n */\ngoog.ui.Control.prototype.handleBlur = function(e) {\n  'use strict';\n  if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n    this.setActive(false);\n  }\n  if (this.isAutoState(goog.ui.Component.State.FOCUSED)) {\n    this.setFocused(false);\n  }\n};\n\n\n/**\n * Attempts to handle a keyboard event, if the component is enabled and visible,\n * by calling {@link handleKeyEventInternal}.  Considered protected; should only\n * be used within this package and by subclasses.\n * @param {goog.events.KeyEvent} e Key event to handle.\n * @return {boolean} Whether the key event was handled.\n */\ngoog.ui.Control.prototype.handleKeyEvent = function(e) {\n  'use strict';\n  if (this.isVisible() && this.isEnabled() && this.handleKeyEventInternal(e)) {\n    e.preventDefault();\n    e.stopPropagation();\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Attempts to handle a keyboard event; returns true if the event was handled,\n * false otherwise.  Considered protected; should only be used within this\n * package and by subclasses.\n * @param {goog.events.KeyEvent} e Key event to handle.\n * @return {boolean} Whether the key event was handled.\n * @protected\n */\ngoog.ui.Control.prototype.handleKeyEventInternal = function(e) {\n  'use strict';\n  return e.keyCode == goog.events.KeyCodes.ENTER &&\n      this.performActionInternal(e);\n};\n\n\n// Register the default renderer for goog.ui.Controls.\ngoog.ui.registry.setDefaultRenderer(goog.ui.Control, goog.ui.ControlRenderer);\n\n\n// Register a decorator factory function for goog.ui.Controls.\ngoog.ui.registry.setDecoratorByClassName(\n    goog.ui.ControlRenderer.CSS_CLASS, function() {\n      'use strict';\n      return new goog.ui.Control(null);\n    });\n\n\n\n/**\n * A singleton that helps goog.ui.Control instances play well with screen\n * readers.  It necessitated by shortcomings in IE, and need not be\n * instantiated in any other browser.\n *\n * In most cases, a click on a goog.ui.Control results in a sequence of events:\n * MOUSEDOWN, MOUSEUP and CLICK.  UI controls rely on this sequence since most\n * behavior is trigged by MOUSEDOWN and MOUSEUP.  But when IE is used with some\n * traditional screen readers (JAWS, NVDA and perhaps others), IE only sends\n * the CLICK event, resulting in the control being unresponsive.  This class\n * monitors the sequence of these events, and if it detects a CLICK event not\n * not preceded by a MOUSEUP event, directly calls the control's event handlers\n * for MOUSEDOWN, then MOUSEUP.  While the resulting sequence is different from\n * the norm (the CLICK comes first instead of last), testing thus far shows\n * the resulting behavior to be correct.\n *\n * See http://goo.gl/qvQR4C for more details.\n *\n * @param {!goog.ui.Control} control\n * @constructor\n * @extends {goog.Disposable}\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_ = function(control) {\n  'use strict';\n  goog.ui.Control.IeMouseEventSequenceSimulator_.base(this, 'constructor');\n\n  /** @private {goog.ui.Control}*/\n  this.control_ = control;\n\n  /** @private {boolean} */\n  this.clickExpected_ = false;\n\n  /** @private @const {!goog.events.EventHandler<\n   *                       !goog.ui.Control.IeMouseEventSequenceSimulator_>}\n   */\n  this.handler_ = new goog.events.EventHandler(this);\n  this.registerDisposable(this.handler_);\n\n  var element = this.control_.getElementStrict();\n  var MouseEventType = goog.ui.ComponentUtil.getMouseEventType(control);\n\n  this.handler_.listen(element, MouseEventType.MOUSEDOWN, this.handleMouseDown_)\n      .listen(element, MouseEventType.MOUSEUP, this.handleMouseUp_)\n      .listen(element, goog.events.EventType.CLICK, this.handleClick_);\n};\ngoog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_, goog.Disposable);\n\n\n/**\n * Whether this browser supports synthetic MouseEvents.\n *\n * See https://msdn.microsoft.com/library/dn905219(v=vs.85).aspx for details.\n *\n * @private {boolean}\n * @const\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_ =\n    !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9);\n\n\n/** @private */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_ =\n    function() {\n  'use strict';\n  this.clickExpected_ = false;\n};\n\n\n/** @private */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_ =\n    function() {\n  'use strict';\n  this.clickExpected_ = true;\n};\n\n\n/**\n * @param {!MouseEvent} e\n * @param {goog.events.EventType} typeArg\n * @return {!MouseEvent}\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_ = function(\n    e, typeArg) {\n  'use strict';\n  'use strict';\n\n  if (!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_) {\n    // IE < 9 does not support synthetic mouse events. Therefore, reuse the\n    // existing MouseEvent by overwriting the read only button and type\n    // properties. As IE < 9 does not support ES5 strict mode this will not\n    // generate an exception even when the script specifies \"use strict\".\n    e.button = goog.events.BrowserEvent.MouseButton.LEFT;\n    e.type = typeArg;\n    return e;\n  }\n\n  var event = /** @type {!MouseEvent} */ (document.createEvent('MouseEvents'));\n  event.initMouseEvent(\n      typeArg, e.bubbles, e.cancelable,\n      e.view || null,  // IE9 errors if view is undefined\n      e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey,\n      e.shiftKey, e.metaKey, goog.events.BrowserEvent.MouseButton.LEFT,\n      e.relatedTarget || null);  // IE9 errors if relatedTarget is undefined\n  return event;\n};\n\n\n/**\n * @param {!goog.events.Event} e\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_ =\n    function(e) {\n  'use strict';\n  if (this.clickExpected_) {\n    // This is the end of a normal click sequence: mouse-down, mouse-up, click.\n    // Assume appropriate actions have already been performed.\n    this.clickExpected_ = false;\n    return;\n  }\n\n  // For click events not part of a normal sequence, similate the mouse-down and\n  // mouse-up events by creating synthetic events for each and directly invoke\n  // the corresponding event listeners in order.\n\n  var browserEvent = /** @type {goog.events.BrowserEvent} */ (e);\n\n  var event = /** @type {!MouseEvent} */ (browserEvent.getBrowserEvent());\n  var origEventButton = event.button;\n  var origEventType = event.type;\n\n  var down = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(\n      event, goog.events.EventType.MOUSEDOWN);\n  this.control_.handleMouseDown(\n      new goog.events.BrowserEvent(down, browserEvent.currentTarget));\n\n  var up = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(\n      event, goog.events.EventType.MOUSEUP);\n  this.control_.handleMouseUp(\n      new goog.events.BrowserEvent(up, browserEvent.currentTarget));\n\n  if (goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_) {\n    // This browser supports synthetic events. Avoid resetting the read only\n    // properties (type, button) as they were not overwritten and writing them\n    // results in an exception when running in ES5 strict mode.\n    return;\n  }\n\n  // Restore original values for click handlers that have not yet been invoked.\n  event.button = origEventButton;\n  event.type = origEventType;\n};\n\n\n/** @override */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal =\n    function() {\n  'use strict';\n  this.control_ = null;\n  goog.ui.Control.IeMouseEventSequenceSimulator_.base(this, 'disposeInternal');\n};\n"],
"names":["goog","provide","require","requireType","ui","Control","goog.ui.Control","opt_content","opt_renderer","opt_domHelper","Component","call","renderer_","registry","getDefaultRenderer","constructor","setContentInternal","undefined","ariaLabel_","ieMouseEventSequenceSimulator_","inherits","registerDecorator","setDecoratorByClassName","getDecorator","prototype","content_","state_","supportedStates_","State","DISABLED","HOVER","ACTIVE","FOCUSED","autoStates_","ALL","statesWithTransitionEvents_","visible_","keyHandler_","extraClassNames_","handleMouseEvents_","allowTextSelection_","preferredAriaRole_","isHandleMouseEvents","goog.ui.Control.prototype.isHandleMouseEvents","setHandleMouseEvents","goog.ui.Control.prototype.setHandleMouseEvents","enable","isInDocument","enableMouseEventHandling_","getKeyEventTarget","goog.ui.Control.prototype.getKeyEventTarget","getKeyHandler","goog.ui.Control.prototype.getKeyHandler","events","KeyHandler","getRenderer","goog.ui.Control.prototype.getRenderer","setRenderer","goog.ui.Control.prototype.setRenderer","renderer","Error","ALREADY_RENDERED","getElement","setElementInternal","getExtraClassNames","goog.ui.Control.prototype.getExtraClassNames","addClassName","goog.ui.Control.prototype.addClassName","className","array","contains","push","enableExtraClassName","removeClassName","goog.ui.Control.prototype.removeClassName","remove","length","enableClassName","goog.ui.Control.prototype.enableClassName","createDom","goog.ui.Control.prototype.createDom","element","setAriaRole","getPreferredAriaRole","isAllowTextSelection","setAllowTextSelection","isVisible","setVisible","goog.ui.Control.prototype.getPreferredAriaRole","setPreferredAriaRole","goog.ui.Control.prototype.setPreferredAriaRole","role","getAriaLabel","goog.ui.Control.prototype.getAriaLabel","setAriaLabel","goog.ui.Control.prototype.setAriaLabel","label","getContentElement","goog.ui.Control.prototype.getContentElement","canDecorate","goog.ui.Control.prototype.canDecorate","decorateInternal","goog.ui.Control.prototype.decorateInternal","decorate","style","display","enterDocument","goog.ui.Control.prototype.enterDocument","superClass_","setAriaStates","getElementStrict","initializeDom","isSupportedState","keyTarget","keyHandler","attach","getHandler","listen","EventType","KEY","handleKeyEvent","FOCUS","handleFocus","BLUR","handleBlur","goog.ui.Control.prototype.enableMouseEventHandling_","MouseEventType","ComponentUtil","getMouseEventType","handler","MOUSEDOWN","handleMouseDown","MOUSEUP","MOUSECANCEL","handleMouseUp","MOUSEOVER","handleMouseOver","MOUSEOUT","handleMouseOut","pointerEventsEnabled","GOTPOINTERCAPTURE","preventPointerCapture_","handleContextMenu","nullFunction","CONTEXTMENU","userAgent","IE","isVersionOrHigher","DBLCLICK","handleDblClick","IeMouseEventSequenceSimulator_","registerDisposable","unlisten","dispose","exitDocument","goog.ui.Control.prototype.exitDocument","detach","isEnabled","setFocusable","disposeInternal","goog.ui.Control.prototype.disposeInternal","getContent","goog.ui.Control.prototype.getContent","setContent","goog.ui.Control.prototype.setContent","content","goog.ui.Control.prototype.setContentInternal","getCaption","goog.ui.Control.prototype.getCaption","caption","Array","isArray","map","dom","getRawTextContent","join","getTextContent","string","collapseBreakingSpaces","setCaption","goog.ui.Control.prototype.setCaption","setRightToLeft","goog.ui.Control.prototype.setRightToLeft","rightToLeft","goog.ui.Control.prototype.isAllowTextSelection","goog.ui.Control.prototype.setAllowTextSelection","allow","goog.ui.Control.prototype.isVisible","goog.ui.Control.prototype.setVisible","visible","opt_force","dispatchEvent","SHOW","HIDE","goog.ui.Control.prototype.isEnabled","hasState","isParentDisabled_","goog.ui.Control.prototype.isParentDisabled_","parent","getParent","setEnabled","goog.ui.Control.prototype.setEnabled","isTransitionAllowed","setActive","setHighlighted","setState","isHighlighted","goog.ui.Control.prototype.isHighlighted","goog.ui.Control.prototype.setHighlighted","highlight","isActive","goog.ui.Control.prototype.isActive","goog.ui.Control.prototype.setActive","active","isSelected","goog.ui.Control.prototype.isSelected","SELECTED","setSelected","goog.ui.Control.prototype.setSelected","select","isChecked","goog.ui.Control.prototype.isChecked","CHECKED","setChecked","goog.ui.Control.prototype.setChecked","check","isFocused","goog.ui.Control.prototype.isFocused","setFocused","goog.ui.Control.prototype.setFocused","focused","isOpen","goog.ui.Control.prototype.isOpen","OPENED","setOpen","goog.ui.Control.prototype.setOpen","open","getState","goog.ui.Control.prototype.getState","goog.ui.Control.prototype.hasState","state","goog.ui.Control.prototype.setState","opt_calledFrom","setStateInternal","goog.ui.Control.prototype.setStateInternal","goog.ui.Control.prototype.isSupportedState","setSupportedState","goog.ui.Control.prototype.setSupportedState","support","isAutoState","goog.ui.Control.prototype.isAutoState","setAutoStates","goog.ui.Control.prototype.setAutoStates","states","isDispatchTransitionEvents","goog.ui.Control.prototype.isDispatchTransitionEvents","setDispatchTransitionEvents","goog.ui.Control.prototype.setDispatchTransitionEvents","goog.ui.Control.prototype.isTransitionAllowed","getStateTransitionEvent","isDisposed","goog.ui.Control.prototype.handleMouseOver","e","isMouseEventWithinElement_","ENTER","goog.ui.Control.prototype.handleMouseOut","LEAVE","goog.ui.Control.prototype.preventPointerCapture_","elem","target","releasePointerCapture","pointerId","goog.ui.Control.isMouseEventWithinElement_","relatedTarget","goog.ui.Control.prototype.handleMouseDown","isMouseActionButton","isFocusable","focus","preventDefault","goog.ui.Control.prototype.handleMouseUp","performActionInternal","goog.ui.Control.prototype.handleDblClick","goog.ui.Control.prototype.performActionInternal","actionEvent","Event","ACTION","altKey","ctrlKey","metaKey","shiftKey","platformModifierKey","goog.ui.Control.prototype.handleFocus","goog.ui.Control.prototype.handleBlur","goog.ui.Control.prototype.handleKeyEvent","handleKeyEventInternal","stopPropagation","goog.ui.Control.prototype.handleKeyEventInternal","keyCode","KeyCodes","setDefaultRenderer","ControlRenderer","CSS_CLASS","goog.ui.Control.IeMouseEventSequenceSimulator_","control","base","control_","clickExpected_","handler_","EventHandler","handleMouseDown_","handleMouseUp_","CLICK","handleClick_","Disposable","SYNTHETIC_EVENTS_","isDocumentModeOrHigher","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_","makeLeftMouseEvent_","goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_","typeArg","button","BrowserEvent","MouseButton","LEFT","type","event","document","createEvent","initMouseEvent","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_","browserEvent","getBrowserEvent","origEventButton","origEventType","down","currentTarget","up","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal"]
}
