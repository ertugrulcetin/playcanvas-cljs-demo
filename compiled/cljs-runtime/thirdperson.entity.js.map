{"version":3,"sources":["thirdperson/entity.cljs"],"mappings":"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","names":["js/thirdperson","js/thirdperson.entity","js/thirdperson.entity.app","thirdperson.entity/app","cljs.core/Delay","obj29910","js/undefined","js/pc","var_args","G__29912","thirdperson.entity/vec3","js/Error","thirdperson.entity.vec3","x","y","z","js/pc.Vec3","thirdperson.entity/pressed-only?","only-required-keys","all-keys","pressed-keys","cljs.core/sequential?","p1__29913#","cljs.core.map","obj29915","applied-science.js-interop.impl/wrap-key","p1__29914#","obj29916","cljs.core._EQ_","cljs.core/set","cljs.core.filter","pos","G__29918","thirdperson.entity/walk","dt","this","thirdperson.entity.walk","backwards","obj__14548__auto__","f__14549__auto__","_","obj29919","parent__14555__auto__","f__14556__auto__","target-y","cljs.core.atom","cljs.core/reset!","obj29922","obj29921","obj29920","obj29925","obj29924","obj29923","cljs.core/deref","thirdperson.entity/rules","odoyle.rules/->Rule","cljs.core.mapv","odoyle.rules/map->Condition","p__29926","map__29927","cljs.core/--destructure-map","cljs.core.get","p__29928","map__29929","p__29934","map__29935","p__29936","map__29937","p__29940","map__29941","p__29942","map__29943","p__29948","map__29949","p__29950","map__29951","p__29952","map__29953","p__29954","map__29955","p__29960","map__29961","p__29962","map__29963","p__29966","map__29967","p__29968","map__29969","p__29972","map__29973","p__29974","map__29975","p__29978","map__29979","p__29980","map__29981","forward","obj29976","obj29977","obj29938","obj29939","right","obj29970","obj29971","obj29964","obj29965","obj29956","obj29957","obj29958","obj29959","obj29982","obj29983","obj29984","obj29985","obj29930","obj29931","obj29932","obj29933","obj29944","obj29945","obj29946","obj29947","js/thirdperson.entity.*session","thirdperson.entity/*session","cljs.core.reduce","odoyle.rules/add-rule","odoyle.rules/->session","thirdperson.entity/pressed?","key","obj29986","thirdperson.entity/find-by-name","name","p__29987","map__29988","thirdperson.entity/create-script","script-name","attrs","init","update","script","cljs.core/name","seq__29989","cljs.core/seq","chunk__29990","count__29991","i__29992","vec__29999","cljs.core.nth","temp__5804__auto__","cljs.core/chunked-seq?","c__5565__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","vec__30002","cljs.core/first","cljs.core/next","k","v","cljs.core/clj->js","G__30005","obj30006","obj30010","child30007","new-child__14480__auto__","obj30013","G__30014","obj30015","obj30019","child30016","obj30022","G__30024","thirdperson.entity/upsert","p__30025","vec__30026","session","id","attr","f","thirdperson.entity.upsert","attr->value","cljs.core/reduce-kv","attr*","cljs.core.keyword","value","G__30029","G__30030","odoyle.rules.query_all","G__30038","G__30039","G__30040","G__30041","G__30042","G__30043","fexpr__30037","odoyle.rules/get-alpha-nodes-for-fact","G__30032","G__30033","G__30034","G__30035","G__30036","fexpr__30031","odoyle.rules/upsert-fact","thirdperson.entity/init","camera","app","cljs.core.swap_BANG_","odoyle.rules.insert","odoyle.rules.fire_rules","e","p1__30044#","cljs.core.conj","obj30047","p1__30045#","cljs.core.disj","obj30048","obj30049","obj30050","obj30054","obj30053","p1__30046#","obj30056","obj30055","obj30058","obj30057"],"sourcesContent":["(ns thirdperson.entity\n  (:require\n    [applied-science.js-interop :as j]\n    [odoyle.rules :as o])\n  (:require-macros\n    [thirdperson.macros :refer [fnt] :as m]))\n\n(defonce app (delay (j/get js/pc :app)))\n\n(defn vec3\n  ([]\n   (vec3 0 0 0))\n  ([x y z]\n   (js/pc.Vec3. x y z)))\n\n(defn pressed-only? [only-required-keys all-keys pressed-keys]\n  (let [only-required-keys (if (sequential? only-required-keys) only-required-keys [only-required-keys])\n        all-keys (if (sequential? all-keys) all-keys [all-keys])\n        only-required-keys (map #(j/get js/pc %) only-required-keys)\n        all-keys (map #(j/get js/pc %) all-keys)]\n    (= (set only-required-keys)\n       (set (filter (set all-keys) pressed-keys)))))\n\n(let [pos (vec3)]\n  (defn- walk\n    ([dt x z this]\n     (walk dt x z this false))\n    ([dt x z this backwards]\n     (when (or (not (zero? x))\n               (not (zero? z)))\n       (let [pos (j/call pos :set (* x dt) 0 (* z dt))\n             _ (do\n                 (-> pos (j/call :normalize) (j/call :scale (j/get this :speed)))\n                 (j/call pos :add (j/call-in this [:entity :getPosition])))\n             target-y (atom nil)]\n         (if backwards\n           (reset! target-y (m/get-in! :cameraScript :eulers :x))\n           (reset! target-y (+ (m/get-in! :cameraScript :eulers :x) 180)))\n         (j/call-in this [:entity :rigidbody :teleport] pos (vec3 0 @target-y 0)))))))\n\n(def rules\n  (o/ruleset\n    {::player\n     [:what\n      [::player ::this this]\n      [::player ::forward forward]\n      [::player ::right right]\n      [::player ::pressed-keys pressed-keys]]\n\n     ::move-forward\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::this this {:then false}]\n      [::player ::forward forward {:then false}]\n      :when\n      (pressed-only? :KEY_W [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (j/get forward :x)\n            z (j/get forward :z)]\n        (walk dt x z this))]\n\n     ::move-backwards\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::forward forward {:then false}]\n      [::player ::this this {:then false}]\n      :when\n      (pressed-only? :KEY_S [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (j/get forward :x)\n            z (j/get forward :z)]\n        (walk dt x z this true))]\n\n     ::move-left\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::right right {:then false}]\n      [::player ::this this {:then false}]\n      :when\n      (pressed-only? :KEY_A [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (- (j/get right :x))\n            z (- (j/get right :z))]\n        (walk dt x z this))]\n\n     ::move-right\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::right right {:then false}]\n      [::player ::this this {:then false}]\n      :when\n      (pressed-only? :KEY_D [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (j/get right :x)\n            z (j/get right :z)]\n        (walk dt x z this))]\n\n     ::move-left-forward\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::this this {:then false}]\n      [::player ::forward forward {:then false}]\n      [::player ::right right {:then false}]\n      :when\n      (pressed-only? [:KEY_W :KEY_A] [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (- (j/get forward :x) (j/get right :x))\n            z (- (j/get forward :z) (j/get right :z))]\n        (walk dt x z this))]\n\n     ::move-right-forward\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::this this {:then false}]\n      [::player ::forward forward {:then false}]\n      [::player ::right right {:then false}]\n      :when\n      (pressed-only? [:KEY_W :KEY_D] [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (+ (j/get forward :x) (j/get right :x))\n            z (+ (j/get forward :z) (j/get right :z))]\n        (walk dt x z this))]\n\n     ::move-left-backwards\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::forward forward {:then false}]\n      [::player ::right right {:then false}]\n      [::player ::this this {:then false}]\n      :when\n      (pressed-only? [:KEY_S :KEY_A] [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (+ (j/get forward :x) (j/get right :x))\n            z (+ (j/get forward :z) (j/get right :z))]\n        (walk dt x z this true))]\n\n     ::move-right-backwards\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::forward forward {:then false}]\n      [::player ::right right {:then false}]\n      [::player ::this this {:then false}]\n      :when\n      (pressed-only? [:KEY_S :KEY_D] [:KEY_W :KEY_S :KEY_A :KEY_D] pressed-keys)\n      :then\n      (let [x (- (j/get forward :x) (j/get right :x))\n            z (- (j/get forward :z) (j/get right :z))]\n        (walk dt x z this true))]\n\n     ::jump\n     [:what\n      [::time ::delta dt]\n      [::player ::pressed-keys pressed-keys {:then false}]\n      [::player ::this this {:then false}]\n      :when\n      (pressed-only? :KEY_SPACE :KEY_SPACE pressed-keys)\n      :then\n      (j/call-in this [:entity :rigidbody :applyImpulse] 0 50 0)]}))\n\n(defonce *session\n  (atom (reduce o/add-rule (o/->session) rules)))\n\n(defn pressed? [key]\n  (j/call-in @app [:keyboard :isPressed] (j/get js/pc key)))\n\n(defn find-by-name [name]\n  (j/call-in @app [:root :findByName] name))\n\n(defn create-script [script-name {:keys [attrs init update]}]\n  (let [script (j/call js/pc :createScript (name script-name))]\n    (doseq [[k v] attrs]\n      (j/call-in script [:attributes :add] (name k) (clj->js v)))\n    (some->> init (j/assoc-in! script [:prototype :initialize]))\n    (some->> update (j/assoc-in! script [:prototype :update]))))\n\n(defn upsert\n  ([session [id attr f]]\n   (upsert session id attr f))\n  ([session id attr->value]\n   (reduce-kv (fn [session attr f]\n                (upsert session id attr f))\n              session attr->value))\n  ([session id attr f]\n   (let [attr* (-> attr name keyword)\n         value (f (-> (o/query-all session id) first attr*))]\n     (->> (#'o/get-alpha-nodes-for-fact session (:alpha-node session) id attr value true)\n          (#'o/upsert-fact session id attr value)))))\n\n(defn init []\n  (create-script :playerMovement\n                 {:attrs {:speed {:type \"number\"\n                                  :default 0.09}}\n                  :init (fnt\n                          (let [camera (find-by-name \"Camera\")\n                                app @app]\n                            (swap! *session\n                                   (fn [session]\n                                     (-> session\n                                         (o/insert ::player {::this this\n                                                             ::pressed-keys #{}})\n                                         o/fire-rules)))\n                            (j/call-in app [:keyboard :on] \"keydown\"\n                                       (fn [e]\n                                         (swap! *session\n                                                (fn [session]\n                                                  (-> session\n                                                      (upsert ::player ::pressed-keys #(conj % (j/get e :key)))\n                                                      o/fire-rules))))\n                                       this)\n                            (j/call-in app [:keyboard :on] \"keyup\"\n                                       (fn [e]\n                                         (swap! *session\n                                                (fn [session]\n                                                  (-> session\n                                                      (upsert ::player ::pressed-keys #(disj % (j/get e :key)))\n                                                      o/fire-rules))))\n                                       this)\n                            (m/set! :cameraScript (j/get-in camera [:script :cameraMovement]))))\n                  :update (fnt\n                            (swap! *session #(-> %\n                                                 (o/insert ::player {::forward (m/get-in! :entity :forward)\n                                                                     ::right (m/get-in! :entity :right)})\n                                                 (o/insert ::time {::delta dt})\n                                                 o/fire-rules)))}))\n"]}