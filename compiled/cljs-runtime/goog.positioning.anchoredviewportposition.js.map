{
"version":3,
"file":"goog.positioning.anchoredviewportposition.js",
"lineCount":48,
"mappings":"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",
"sources":["goog/positioning/anchoredviewportposition.js"],
"sourcesContent":["/**\n * @license\n * Copyright The Closure Library Authors.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Anchored viewport positioning class.\n */\n\ngoog.provide('goog.positioning.AnchoredViewportPosition');\n\ngoog.require('goog.positioning');\ngoog.require('goog.positioning.AnchoredPosition');\ngoog.require('goog.positioning.Overflow');\ngoog.require('goog.positioning.OverflowStatus');\ngoog.requireType('goog.math.Box');\ngoog.requireType('goog.math.Size');\n\n\n\n/**\n * Encapsulates a popup position where the popup is anchored at a corner of\n * an element. The corners are swapped if dictated by the viewport. For instance\n * if a popup is anchored with its top left corner to the bottom left corner of\n * the anchor the popup is either displayed below the anchor (as specified) or\n * above it if there's not enough room to display it below.\n *\n * When using this positioning object it's recommended that the movable element\n * be absolutely positioned.\n *\n * @param {Element} anchorElement Element the movable element should be\n *     anchored against.\n * @param {goog.positioning.Corner} corner Corner of anchored element the\n *     movable element should be positioned at.\n * @param {boolean=} opt_adjust Whether the positioning should be adjusted until\n *     the element fits inside the viewport even if that means that the anchored\n *     corners are ignored.\n * @param {goog.math.Box=} opt_overflowConstraint Box object describing the\n *     dimensions in which the movable element could be shown.\n * @constructor\n * @extends {goog.positioning.AnchoredPosition}\n */\ngoog.positioning.AnchoredViewportPosition = function(\n    anchorElement, corner, opt_adjust, opt_overflowConstraint) {\n  'use strict';\n  goog.positioning.AnchoredPosition.call(this, anchorElement, corner);\n\n  /**\n   * The last resort algorithm to use if the algorithm can't fit inside\n   * the viewport.\n   *\n   * IGNORE = do nothing, just display at the preferred position.\n   *\n   * ADJUST_X | ADJUST_Y = Adjust until the element fits, even if that means\n   * that the anchored corners are ignored.\n   *\n   * @type {number}\n   * @private\n   */\n  this.lastResortOverflow_ = opt_adjust ? (goog.positioning.Overflow.ADJUST_X |\n                                           goog.positioning.Overflow.ADJUST_Y) :\n                                          goog.positioning.Overflow.IGNORE;\n\n  /**\n   * The dimensions in which the movable element could be shown.\n   * @type {goog.math.Box|undefined}\n   * @private\n   */\n  this.overflowConstraint_ = opt_overflowConstraint || undefined;\n};\ngoog.inherits(\n    goog.positioning.AnchoredViewportPosition,\n    goog.positioning.AnchoredPosition);\n\n\n/**\n * @return {goog.math.Box|undefined} The box object describing the\n *     dimensions in which the movable element will be shown.\n */\ngoog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint =\n    function() {\n  'use strict';\n  return this.overflowConstraint_;\n};\n\n\n/**\n * @param {goog.math.Box|undefined} overflowConstraint Box object describing the\n *     dimensions in which the movable element could be shown.\n */\ngoog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint =\n    function(overflowConstraint) {\n  'use strict';\n  this.overflowConstraint_ = overflowConstraint;\n};\n\n\n/**\n * @return {number} A bitmask for the \"last resort\" overflow.\n */\ngoog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow =\n    function() {\n  'use strict';\n  return this.lastResortOverflow_;\n};\n\n\n/**\n * @param {number} lastResortOverflow A bitmask for the \"last resort\" overflow,\n *     if we fail to fit the element on-screen.\n */\ngoog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow =\n    function(lastResortOverflow) {\n  'use strict';\n  this.lastResortOverflow_ = lastResortOverflow;\n};\n\n\n/**\n * Repositions the movable element.\n *\n * @param {Element} movableElement Element to position.\n * @param {goog.positioning.Corner} movableCorner Corner of the movable element\n *     that should be positioned adjacent to the anchored element.\n * @param {goog.math.Box=} opt_margin A margin specified in pixels.\n * @param {goog.math.Size=} opt_preferredSize The preferred size of the\n *     movableElement.\n * @override\n */\ngoog.positioning.AnchoredViewportPosition.prototype.reposition = function(\n    movableElement, movableCorner, opt_margin, opt_preferredSize) {\n  'use strict';\n  var status = goog.positioning.positionAtAnchor(\n      this.element, this.corner, movableElement, movableCorner, null,\n      opt_margin,\n      goog.positioning.Overflow.FAIL_X | goog.positioning.Overflow.FAIL_Y,\n      opt_preferredSize, this.overflowConstraint_);\n\n  // If the desired position is outside the viewport try mirroring the corners\n  // horizontally or vertically.\n  if (status & goog.positioning.OverflowStatus.FAILED) {\n    var cornerFallback = this.adjustCorner(status, this.corner);\n    var movableCornerFallback = this.adjustCorner(status, movableCorner);\n\n    status = goog.positioning.positionAtAnchor(\n        this.element, cornerFallback, movableElement, movableCornerFallback,\n        null, opt_margin,\n        goog.positioning.Overflow.FAIL_X | goog.positioning.Overflow.FAIL_Y,\n        opt_preferredSize, this.overflowConstraint_);\n\n    if (status & goog.positioning.OverflowStatus.FAILED) {\n      // If that also fails, pick the best corner from the two tries,\n      // and adjust the position until it fits.\n      cornerFallback = this.adjustCorner(status, cornerFallback);\n      movableCornerFallback = this.adjustCorner(status, movableCornerFallback);\n\n      goog.positioning.positionAtAnchor(\n          this.element, cornerFallback, movableElement, movableCornerFallback,\n          null, opt_margin, this.getLastResortOverflow(), opt_preferredSize,\n          this.overflowConstraint_);\n    }\n  }\n};\n\n\n/**\n * Adjusts the corner if X or Y positioning failed.\n * @param {number} status The status of the last positionAtAnchor call.\n * @param {goog.positioning.Corner} corner The corner to adjust.\n * @return {goog.positioning.Corner} The adjusted corner.\n * @protected\n */\ngoog.positioning.AnchoredViewportPosition.prototype.adjustCorner = function(\n    status, corner) {\n  'use strict';\n  if (status & goog.positioning.OverflowStatus.FAILED_HORIZONTAL) {\n    corner = goog.positioning.flipCornerHorizontal(corner);\n  }\n\n  if (status & goog.positioning.OverflowStatus.FAILED_VERTICAL) {\n    corner = goog.positioning.flipCornerVertical(corner);\n  }\n\n  return corner;\n};\n"],
"names":["goog","provide","require","requireType","positioning","AnchoredViewportPosition","goog.positioning.AnchoredViewportPosition","anchorElement","corner","opt_adjust","opt_overflowConstraint","AnchoredPosition","call","lastResortOverflow_","Overflow","ADJUST_X","ADJUST_Y","IGNORE","overflowConstraint_","undefined","inherits","prototype","getOverflowConstraint","goog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint","setOverflowConstraint","goog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint","overflowConstraint","getLastResortOverflow","goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow","setLastResortOverflow","goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow","lastResortOverflow","reposition","goog.positioning.AnchoredViewportPosition.prototype.reposition","movableElement","movableCorner","opt_margin","opt_preferredSize","status","positionAtAnchor","element","FAIL_X","FAIL_Y","OverflowStatus","FAILED","cornerFallback","adjustCorner","movableCornerFallback","goog.positioning.AnchoredViewportPosition.prototype.adjustCorner","FAILED_HORIZONTAL","flipCornerHorizontal","FAILED_VERTICAL","flipCornerVertical"]
}
